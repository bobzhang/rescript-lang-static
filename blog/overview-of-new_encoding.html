<!DOCTYPE html><html><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><title>Make generated JavaScript Inline Caching friendly using types in BuckleScript version 8 | ReScript Blog</title><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, minimal-ui" name="viewport"/><meta content="Highlights of our newest changes to the internal representation
and how they will benefit our users.
" name="description"/><meta content="" name="keywords"/><link href="/static/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/static/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/static/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/static/favicon/site.webmanifest" rel="manifest"/><meta content="ReScript Documentation" property="og:site_name"/><meta content="en_US" property="og:locale"/><meta content="Make generated JavaScript Inline Caching friendly using types in BuckleScript version 8 | ReScript Blog" property="og:title"/><meta content="Highlights of our newest changes to the internal representation
and how they will benefit our users.
" property="og:description"/><meta content="https://res.cloudinary.com/dmm9n7v9f/image/upload/v1598616442/Reason%20Association/rescript-lang.org/Art-3-rescript-launch_ovoibg.jpg" property="og:image"/><meta content="Make generated JavaScript Inline Caching friendly using types in BuckleScript version 8 | ReScript Blog" name="twitter:title"/><meta content="Highlights of our newest changes to the internal representation
and how they will benefit our users.
" name="twitter:description"/><meta content="@reasonml" name="twitter:site"/><meta content="@ReasonAssoc" name="twitter:creator"/><meta content="image/jpeg" property="og:image:type"/><meta content="summary_large_image" name="twitter:card"/><link title="ReScript Blog" href="/blog/feed.xml" rel="alternate" type="application/rss+xml"/><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/43ae73b4aa2a5c61cefe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/43ae73b4aa2a5c61cefe.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-4e582efe68f401073f15.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-998f5b95ac98f74bab8f.js" as="script"/><link rel="preload" href="/_next/static/chunks/43481-280514135c7b3adb9781.js" as="script"/><link rel="preload" href="/_next/static/chunks/62168-646866730a0afa3b7493.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-7e2e753fca1f45eed2e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/53706-d09a138e6cd709547d22.js" as="script"/><link rel="preload" href="/_next/static/chunks/25396-7c202dfca7dd4a484721.js" as="script"/><link rel="preload" href="/_next/static/chunks/49909-39e42e72225fd86b3fa0.js" as="script"/><link rel="preload" href="/_next/static/chunks/8792-02da446de816dae9d9f0.js" as="script"/><link rel="preload" href="/_next/static/chunks/13692-5739462c0ba24bf7f2e2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-85ce0337ab254104dc2d.js" as="script"/><link rel="preload" href="/_next/static/chunks/9f96d65d-168609d0476f309da299.js" as="script"/><link rel="preload" href="/_next/static/chunks/21504-78e44067594ba989bf0a.js" as="script"/><link rel="preload" href="/_next/static/chunks/49225-9a2e43fcfa75940fbbb7.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-cc9e0ec282e93bf455bc.js" as="script"/></head><body><div id="__next"><div class="mt-4 xs:mt-16"><div class="text-gray-80"><nav class="fixed top-0 z-50 px-4 flex xs:justify-center w-full h-16 bg-gray-95 shadow text-white-80 text-14" id="header" style="min-width:20rem"><div class="flex justify-between items-center h-full w-full max-w-1280"><div class="h-8 w-8 lg:h-10 lg:w-32"><a class="block hover:cursor-pointer w-full h-full flex justify-center items-center font-bold" href="/"><img class="lg:hidden" src="/static/nav-logo@2x.png"/><img class="hidden lg:block" src="/static/nav-logo-full@2x.png"/></a></div><div class="flex items-center xs:justify-between w-full bg-gray-95 sm:h-auto sm:relative"><div class="flex ml-10 space-x-5 w-full max-w-320" style="max-width:26rem"><div class="relative"><div class="flex items-center"><button class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px border-none flex items-center hover:cursor-pointer " tabindex="0"><span class="">Docs</span></button></div><div class="hidden fixed left-0 overflow-y-scroll overflow-x-hidden border-gray-80 border-gray-40 min-w-320 w-full h-full bg-white sm:overflow-y-auto sm:bg-transparent sm:h-auto sm:justify-center sm:rounded-bl-xl sm:rounded-br-xl sm:shadow" style="margin-top:1rem"><div class="w-full"><div class="relative w-full bg-white pb-32 min-h-full sm:pb-0 text-gray-60 text-14 rounded-bl-xl rounded-br-xl"><div class="flex justify-center w-full py-2 border-b border-gray-10"><div class="px-4 w-full space-x-2 max-w-1280 "><select class="text-12 border border-gray-10 text-gray-80 inline-block rounded px-4 py-1 font-semibold " name="versionSelection"><option selected="" class="py-4" value="latest">v9.1</option><option class="py-4" value="v9.0.0">v8.2 - v9.0</option><option class="py-4" value="v8.0.0">v6.0 - v8.2</option></select><span class="text-gray-40 text-12">This is the latest docs version</span></div></div><div class="flex justify-center"><div class="w-full sm:grid sm:grid-cols-3 max-w-1280"><div class="flex px-4 sm:justify-center border-r border-gray-10 pt-8 pb-10"><div><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Quick Links</div><div><ul class="space-y-2 ml-2 mt-6"><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/introduction">Overview</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/overview">Language Features</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/embed-raw-javascript">JS Interop</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/build-overview">Build System</a></li></ul></div></div></div><div class="flex px-4 sm:h-full sm:justify-center border-r border-gray-10 pt-8"><div class="w-full pb-16" style="max-width:19.625rem"><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Documentation</div><div><div class="mt-6"><a class="" href="/docs/manual/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_manual@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Language Manual</span></div><div class="block text-14 text-gray-60 text-gray-60">Reference for all language features</div></div></div></a><a class="" href="/docs/react/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_rescript_react@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>ReScript &amp; React</span></div><div class="block text-14 text-gray-60 text-gray-60">First class bindings for ReactJS</div></div></div></a><a class="" href="/docs/gentype/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_gentype@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>GenType</span></div><div class="block text-14 text-gray-60 text-gray-60">Seamless TypeScript &amp; Flow integration</div></div></div></a><a class="" href="https://github.com/reason-association/reanalyze" rel="noopener noreferrer" target="_blank"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_reanalyze@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Reanalyze</span><svg class="stroke-current inline-block ml-2 w-4 h-4" height="16.122" width="16.098" viewBox="0 0 16.098 16.122" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-1046.283 -564.299)"><path d="M1987.235-1783.927h-4.849v11.17h11.164v-5.113" fill="none" stroke-width="1.5" transform="translate(-935.353 2352.43)"></path><g transform="translate(1051.72 570.607) rotate(-45)"><path d="M0,0H7.467" fill="none" stroke-width="1.5" transform="translate(0 3.128)"></path><path d="M0,0,3.078,3.078,0,6.156" fill="none" stroke-width="1.5" transform="translate(4.252 0)"></path></g></g></svg></div><div class="block text-14 text-gray-60 text-gray-60">Dead Code &amp; Termination analysis</div></div></div></a></div></div></div></div><div class="flex px-4 sm:h-full sm:justify-center pb-12 pt-8 pb-10"><div class="w-full" style="max-width:19.625rem"><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Exploration</div><div class="mt-6"><a class="" href="/packages"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><div class="w-6 h-6"><img class="w-full" src="/static/ic_package.svg"/></div><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Packages</span></div><div class="block text-14 text-gray-60 text-gray-60">Explore third party libraries and bindings</div></div></div></a><a class="" href="/syntax-lookup"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><div class="-mr-2 flex w-6 h-6 justify-center items-center"><img class="w-4 h-4" src="/static/ic_search.svg"/></div><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Syntax Lookup</span></div><div class="block text-14 text-gray-60 text-gray-60">Discover all syntax constructs</div></div></div></a></div></div></div></div></div><img class="hidden xl:block absolute bottom-0 right-0" style="max-width:27.8rem" src="/static/illu_index_rescript@2x.png"/></div></div></div></div><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/docs/manual/latest/api">API</a><a class="hidden xs:block no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/try">Playground</a><a class="hidden xs:block text-inherit font-medium text-fire-30 border-b border-fire" href="/blog">Blog</a><a class="hidden xs:block no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/community">Community</a></div><div class="hidden md:flex items-center"><div class="hidden sm:block mr-6"><div class=" bg-gray-100 border border-gray-80 hover:text-white hover:cursor-pointer flex justify-center p-2 px-3 rounded-lg"><input type="text" class="transition-all ease-in-out duration-150 text-white bg-gray-100 border-none focus:outline-none w-0" id="docsearch"/><svg class="stroke-current w-5 h-5" height="19.203" width="19.203" viewBox="0 0 19.203 19.203"><g fill="none" stroke-linecap="round" stroke-width="2px" transform="translate(-2 -2)"><path d="M6.479,0A6.479,6.479,0,1,1,0,6.479,6.479,6.479,0,0,1,6.479,0Z" transform="translate(3 3)"></path><line stroke-linejoin="round" transform="translate(14.055 14.055)" x1="5.734" y1="5.734"></line></g></svg></div></div><a class="mr-5 no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://github.com/reason-association/rescript-lang.org#rescript-langorg" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" height="17.79" width="18.236" viewBox="0 0 18.236 17.79"><g transform="translate(8 -5.365)"><path d="M17.013,9.906a9.078,9.078,0,0,0-3.318-3.318A8.918,8.918,0,0,0,9.118,5.365,8.919,8.919,0,0,0,4.541,6.588,9.077,9.077,0,0,0,1.223,9.906,8.919,8.919,0,0,0,0,14.483a8.861,8.861,0,0,0,1.739,5.36,8.93,8.93,0,0,0,4.493,3.294.531.531,0,0,0,.475-.083.464.464,0,0,0,.154-.356q0-.036-.006-.641T6.85,21l-.273.047a3.484,3.484,0,0,1-.659.042,5.02,5.02,0,0,1-.825-.083,1.844,1.844,0,0,1-.8-.356,1.506,1.506,0,0,1-.522-.73l-.119-.273a2.966,2.966,0,0,0-.374-.605,1.432,1.432,0,0,0-.516-.451l-.083-.06a.871.871,0,0,1-.154-.143.651.651,0,0,1-.107-.166q-.036-.083.059-.137a.77.77,0,0,1,.344-.053l.237.035a1.733,1.733,0,0,1,.588.285,1.916,1.916,0,0,1,.576.617,2.093,2.093,0,0,0,.659.742,1.4,1.4,0,0,0,.778.255,3.376,3.376,0,0,0,.677-.059,2.362,2.362,0,0,0,.534-.178,1.924,1.924,0,0,1,.582-1.223,8.129,8.129,0,0,1-1.217-.214,4.845,4.845,0,0,1-1.116-.463,3.2,3.2,0,0,1-.956-.8,3.822,3.822,0,0,1-.623-1.247A5.928,5.928,0,0,1,3.3,14.007a3.463,3.463,0,0,1,.938-2.446A3.192,3.192,0,0,1,4.321,9.14a1.664,1.664,0,0,1,1.021.16,7.138,7.138,0,0,1,.991.457q.315.19.5.321a8.574,8.574,0,0,1,4.559,0l.451-.285a6.389,6.389,0,0,1,1.092-.522,1.556,1.556,0,0,1,.962-.13A3.161,3.161,0,0,1,14,11.562a3.463,3.463,0,0,1,.938,2.446,5.994,5.994,0,0,1-.243,1.787,3.674,3.674,0,0,1-.629,1.247,3.319,3.319,0,0,1-.962.789,4.855,4.855,0,0,1-1.116.463,8.121,8.121,0,0,1-1.217.214,2.115,2.115,0,0,1,.617,1.686v2.5a.473.473,0,0,0,.149.356.516.516,0,0,0,.469.083A8.929,8.929,0,0,0,16.5,19.842a8.863,8.863,0,0,0,1.739-5.36A8.926,8.926,0,0,0,17.013,9.906Z" transform="translate(-8 0)"></path></g></svg></a><a class="mr-5 no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" viewBox="0 0 15.53 12.71"><path d="M5.794,12.711a13.325,13.325,0,0,1-2.058-.163A9.659,9.659,0,0,1,.92,11.523L0,11.02l1-.328c1.089-.358,1.751-.58,2.571-.928A3.421,3.421,0,0,1,1.809,7.726l-.232-.7.19.029a3.456,3.456,0,0,1-.433-.534A3.276,3.276,0,0,1,.779,4.57l.044-.614L1.19,4.1a3.437,3.437,0,0,1-.333-.934A3.552,3.552,0,0,1,1.235.774l.32-.588L1.984.7A7.883,7.883,0,0,0,7.091,3.575a3.054,3.054,0,0,1,.185-1.623A3.038,3.038,0,0,1,8.511.536,3.71,3.71,0,0,1,10.664.008a3.439,3.439,0,0,1,2.114.872,7.1,7.1,0,0,0,.774-.258c.17-.064.362-.136.6-.219L15.042.1l-.579,1.652.119-.008L15.53,1.7l-.56.765c-.032.044-.04.056-.052.073-.045.068-.1.153-.87,1.179a1.448,1.448,0,0,0-.271.943,8.916,8.916,0,0,1-.487,3.586,6.346,6.346,0,0,1-1.7,2.524,7.524,7.524,0,0,1-3.566,1.724A10.979,10.979,0,0,1,5.794,12.711Zm0,0" transform="translate(0 -0.001)"></path></svg></a><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" viewBox="0 0 24 24"><path d="M12.103 0C18.666 0 24 5.485 24 11.997c0 6.51-5.33 11.99-11.9 11.99L0 24V11.79C0 5.28 5.532 0 12.103 0zm.116 4.563a7.395 7.395 0 00-6.337 3.57 7.247 7.247 0 00-.148 7.22L4.4 19.61l4.794-1.074a7.424 7.424 0 008.136-1.39 7.256 7.256 0 001.737-7.997 7.375 7.375 0 00-6.84-4.585h-.008z"></path></svg></a></div></div></div><button class="h-full px-4 xs:hidden flex items-center hover:text-white"><svg class="fill-current h-1 w-auto block " height="4" width="22" stroke="none" viewBox="0 0 22 4"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9)"></circle><circle cx="2" cy="2" r="2" transform="translate(18)"></circle></svg></button><div class="hidden sm:hidden flex-col fixed top-0 left-0 h-full w-full z-50 sm:w-9/12 bg-gray-100 sm:h-auto sm:flex sm:relative sm:flex-row sm:justify-between" style="min-width:20rem;top:4rem"><div class="border-gray-80 border-t"><ul><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><div class="opacity-75 hover:text-white hover:cursor-pointer bg-gray-80 flex items-center p-2 px-3 rounded"><svg class="stroke-current w-5 h-5 mr-3" height="19.203" width="19.203" viewBox="0 0 19.203 19.203"><g fill="none" stroke-linecap="round" stroke-width="2px" transform="translate(-2 -2)"><path d="M6.479,0A6.479,6.479,0,1,1,0,6.479,6.479,6.479,0,0,1,6.479,0Z" transform="translate(3 3)"></path><line stroke-linejoin="round" transform="translate(14.055 14.055)" x1="5.734" y1="5.734"></line></g></svg><input type="text" class="w-32 bg-gray-80 focus:outline-none " id="docsearch-mobile"/></div></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/try">Playground</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="text-inherit font-medium text-fire-30 border-b border-fire" href="/blog">Blog</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank">Twitter</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://github.com/reason-association/rescript-lang.org#rescript-langorg" rel="noopener noreferrer" target="_blank">Github</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank">Forum</a></li></ul></div></div></nav><div class="hidden z-40 bg-gray-10-tr w-full h-full bottom-0" style="backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px)"></div><div class="flex xs:justify-center overflow-hidden pb-48"><main class="mt-16 min-w-320 lg:align-center w-full px-4 md:px-8 max-w-1280 "><div class="w-full"><div class="mb-10 md:mb-20"><div class="flex flex-col items-center"><div class="w-full max-w-740"><div class="text-gray-60 text-lg mb-5">Jun 22, 2020</div><h1 class="text-gray-95 font-medium tracking-tighter text-42 leading-2">Make generated JavaScript Inline Caching friendly using types in BuckleScript version 8</h1><div class="my-8 text-gray-95"><div class="text-21 mt-8 mb-4">Highlights of our newest changes to the internal representation
and how they will benefit our users.
</div></div><div class="flex flex-col md:flex-row mb-12"><div class="mt-4 md:mt-0 md:ml-8 first:ml-0" style="min-width:8.1875rem"><div class="flex items-center"><div class="w-12 h-12 bg-berry-40 block rounded-full mr-3"><img class="h-full w-full rounded-full" src="https://pbs.twimg.com/profile_images/1369548222314598400/E2y46vrB_400x400.jpg"/></div><div class="text-14 font-medium text-gray-95"><a class="hover:text-gray-80" href="https://twitter.com/bobzhang1988" rel="noopener noreferrer" target="_blank">Hongbo Zhang</a><div class="text-gray-60">Compiler &amp; Build System</div></div></div></div></div></div><div class="max-w-740 w-full"><div class="block border-t border-gray-20"></div></div></div></div><div class="flex justify-center"><div class="max-w-740 w-full"><div class="mb-10"><div class="border-l-2 border-orange my-6 py-6 pl-8 pr-10 bg-orange-10"><p class="md-p md:leading-5 text-gray-80 md:text-16"><span class="font-bold">Important: </span>This is an archived blog post, kept for historical reasons. Please note that this information might be outdated.</p></div></div><p class="md-p md:leading-5 text-gray-80 md:text-16">In the next version of BuckleScript, we will make several major changes to tweak the data representation for various data types,
making them more idiomatic and debugger friendly.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Note: since V8 or other JavaScript engines are tweaked to make idiomatic JS code run fast, these changes also results in faster running code.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Another property, for a compiled language like BuckleScript,
is that we can reason about <a class="no-underline text-fire hover:underline" href="https://en.wikipedia.org/wiki/Inline_caching" rel="noopener noreferrer">IC</a> friendliness by just looking at the type definitions locally;
this is very helpful for advanced users to write performance predictable JS code.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">This is a nice <a class="no-underline text-fire hover:underline" href="https://mrale.ph/blog/2012/06/03/explaining-js-vms-in-js-inline-caches.html" rel="noopener noreferrer">introduction</a> to inline caching if you are unfamiliar with this topic,
or you can skip the section about IC and come back later when you get more familiar.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Note: this article is quite dense, so  we will skip the old encoding.</p><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Record (stable)<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#record-stable"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="record-stable" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">BuckleScript has compiled records to idiomatic JS objects since <a class="no-underline text-fire hover:underline" href="https://bucklescript.github.io/blog/2019/11/18/whats-new-in-7" rel="noopener noreferrer">version 7</a>. This is great for performance and debugging.
We also support label renaming to shorten field names to save space.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Take the code below for example:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> int64 = {
    loBits : int <span class="hljs-attribute">[@bs.as &quot;lo&quot;]</span>,
    hiBits : int <span class="hljs-attribute">[@bs.as &quot;hi]</span>
}
<span class="hljs-keyword">let</span> value = {hiBits : <span class="hljs-number">33</span> , loBits : <span class="hljs-number">32</span> };
<span class="hljs-keyword">let</span> rand = ({loBits; hiBits}) =&gt; loBits <span class="hljs-operator">+</span> hiBits;
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">It will generate JS output as below:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> value = {<span class="hljs-attr">lo</span> : <span class="hljs-number">32</span>, <span class="hljs-attr">hi</span> : <span class="hljs-number">33</span>}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rand</span> (<span class="hljs-params">param</span>)</span>{
    <span class="hljs-keyword">return</span> param.lo + param.hi
}
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">If users want to make it even  shorter, in next version, they can choose to compile record as an array, as follows:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> int64 = {
     <span class="hljs-attribute">[@bs.as &quot;0&quot;]</span> loBits : int,
    <span class="hljs-attribute">[@bs.as &quot;1&quot;]</span> hiBits : int
}
<span class="hljs-keyword">let</span> value = {hiBits : <span class="hljs-number">33</span> , loBits : <span class="hljs-number">32</span> };
<span class="hljs-keyword">let</span> rand = ({loBits, hiBits}) =&gt; loBits <span class="hljs-operator">+</span> hiBits;
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">This produces the following JS output:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> value = [<span class="hljs-number">32</span>,<span class="hljs-number">33</span>]
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rand</span>(<span class="hljs-params">param</span>)</span>{
    <span class="hljs-keyword">return</span> param[<span class="hljs-number">0</span>] + param[<span class="hljs-number">1</span>]
}
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">The label renaming techniques can be applied systematically using a syntactic macro;
in the future we may provide an advanced mode to apply it automatically. Another nice property is that
only the type definition needs to be adapted; other parts of code remain untouched.</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">IC friendliness<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#ic-friendliness"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="ic-friendliness" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Records are always in a perfect position for Inline Caching(IC); the compiler can ensure all generated records are of the same shape.</p><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Variant (internal)<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#variant-internal"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="variant-internal" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">This encoding for variants may be  subject to change in the future, but it is so simple that it makes sense for users to have a basic understanding.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Take the following type definition, for example:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> t =
  | <span class="hljs-constructor">Black</span>(t, int, t)
  | <span class="hljs-constructor">Red</span>(t, int, t)
  | <span class="hljs-constructor">Empty</span>;
<span class="hljs-keyword">let</span> empty = <span class="hljs-constructor">Empty</span>  ;
<span class="hljs-keyword">let</span> v0 = <span class="hljs-constructor">Black</span> (empty, <span class="hljs-number">3</span>, empty);
<span class="hljs-keyword">let</span> v1 = <span class="hljs-constructor">Red</span> (empty, <span class="hljs-number">3</span>, empty);
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">The generated JS code would be:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> empty =<span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> v0  = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">0</span><span class="hljs-comment">/*Black*/</span>, <span class="hljs-attr">_0</span> : <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">_1</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">_2</span> : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>};
<span class="hljs-keyword">var</span> v1 = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">1</span><span class="hljs-comment">/*Red*/</span>, <span class="hljs-attr">_0</span> : <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">_1</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">_2</span> : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>};
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">As you can see, variants are divided into two categories.
Variants which do not have a payload are compiled into a number starting from 0,
while variants which have a payload are compiled into an object which has the first slot named <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">TAG</code> and the following slots named as <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_0</code>, <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_1</code> ..</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">variant with inline records<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#variant-with-inline-records"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="variant-with-inline-records" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Users can give names to the payload, and the compiler respects those names. However, we don&#x27;t support user-level renaming, i.e, using <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">bs.as</code>, at this time.</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> t =
  | <span class="hljs-constructor">Black</span> ({l:t, value: int, r: t})
  | <span class="hljs-constructor">Red</span>({l:t, value: int, r: t})
  | <span class="hljs-constructor">Empty</span>;
<span class="hljs-keyword">let</span> empty = <span class="hljs-constructor">Empty</span>  ;
<span class="hljs-keyword">let</span> v0 = <span class="hljs-constructor">Black</span> ({l:empty, value: <span class="hljs-number">3</span>, r:empty});
<span class="hljs-keyword">let</span> v1 = <span class="hljs-constructor">Red</span> ({l:empty, value:<span class="hljs-number">3</span>, r: empty});
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">The generated JS code would be:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> empty =<span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> v0  = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">0</span><span class="hljs-comment">/*Black*/</span>, <span class="hljs-attr">l</span>: <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">value</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">r</span>: : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>};
<span class="hljs-keyword">var</span> v1 = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">1</span><span class="hljs-comment">/*Red*/</span>, <span class="hljs-attr">l</span> : <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">value</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">r</span> : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>};
</code></div></div></div></pre><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Special case when the number of variants which has payload is only 1.<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#special-case-when-the-number-of-variants-which-has-payload-is-only-1"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="special-case-when-the-number-of-variants-which-has-payload-is-only-1" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Take the types below for example:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> list =
    | <span class="hljs-constructor">Nil</span>
    | <span class="hljs-constructor">Cons</span> (int , list);
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">Since only one variant has a payload, the compiler does not need  add <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">TAG</code> when we destructure the data for pattern matching.
Thus, the following code:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">let</span> u = <span class="hljs-constructor">Cons</span>(<span class="hljs-number">1</span>,<span class="hljs-constructor">Nil</span>)
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">will generate the following JS output:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> u = {<span class="hljs-attr">_0</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">_1</span> : <span class="hljs-comment">/*Nil*/</span> <span class="hljs-number">0</span> }; <span class="hljs-comment">// No TAG data.</span>
</code></div></div></div></pre><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Specialized for immutable list<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#specialized-for-immutable-list"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="specialized-for-immutable-list" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">The <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">list</code> type is a built-in type; its type definition is similar to this :</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> t (&#x27;a) =
    | <span class="hljs-literal">[</span><span class="hljs-literal">]</span>
    | (::) (&#x27;a , t (&#x27;a))
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">Without any customization, this would generate JS objects with indexes like <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_0</code>, <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_1</code>, etc.
Since lists are so pervasive, we provide some special treatment so that</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">let</span> u = <span class="hljs-literal">[</span><span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span><span class="hljs-literal">]</span>
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">Will generate js code as below:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> u = {<span class="hljs-attr">hd</span> : <span class="hljs-number">0</span>, {<span class="hljs-attr">tl</span> : {<span class="hljs-attr">hd</span> : <span class="hljs-number">1</span>, {<span class="hljs-attr">tl</span> : {<span class="hljs-attr">hd</span>: <span class="hljs-number">2</span>, {<span class="hljs-attr">tl</span> : {<span class="hljs-attr">hd</span> :<span class="hljs-number">3</span> , <span class="hljs-attr">tl</span> : <span class="hljs-comment">/*[]*/</span><span class="hljs-number">0</span> }}}}}}}
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">This is a minor change; we changed the name of <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_0</code> to <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">hd</code> and <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">_1</code> to <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">tl</code>.</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">IC friendliness<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#ic-friendliness-1"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="ic-friendliness-1" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Types that have only one variant with a payload are in a perfect position for IC.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">The number of variants which does not carry payload will not affect IC, since the pattern match will do a split first.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Types with variants that have the same number of payloads, such as the red-black-tree example above, are also in a perfect position for IC.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">For other cases, it will hit a polymorphic IC in the V8 jit compiler, this is not the fastest running case.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Note that you can always tweak the variant layout to make it IC friendly. For example, you can always introduce one level
of indirection to make all variants share the same number of payloads:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">type</span> t =
    | <span class="hljs-constructor">A0</span> (a0) <span class="hljs-comment">// 1 payload</span>
    | <span class="hljs-constructor">A1</span> (a1) <span class="hljs-comment">// 1 payload</span>
    | <span class="hljs-constructor">A2</span> (a2) <span class="hljs-comment">// 1 payload</span>
    | <span class="hljs-constructor">C0</span>
    | <span class="hljs-constructor">C1</span>
    | <span class="hljs-constructor">C2</span> <span class="hljs-comment">// This will not affect IC</span>
</code></div></div></div></pre><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Variant in debug mode<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#variant-in-debug-mode"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="variant-in-debug-mode" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Note we only generate constructor names in comments for debugging.
When constructor names are attached to the data, it will be more useful for debugging. When debug mode is activated using <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">-bs-g</code>,</p><p class="md-p md:leading-5 text-gray-80 md:text-16">The generated code will be changed from below</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> v0  = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">0</span><span class="hljs-comment">/*Black*/</span>, <span class="hljs-attr">_0</span> : <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">_1</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">_2</span> : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>};
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">to</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> v0  = {<span class="hljs-attr">TAG</span> : <span class="hljs-number">0</span>, <span class="hljs-attr">_0</span> : <span class="hljs-comment">/*Empty*/</span> <span class="hljs-number">0</span> , <span class="hljs-attr">_1</span> : <span class="hljs-number">3</span> , <span class="hljs-attr">_2</span> : <span class="hljs-comment">/*Empty */</span> <span class="hljs-number">0</span>, [<span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&quot;name&quot;</span>)]: <span class="hljs-string">&quot;Black&quot;</span>};
</code></div></div></div></pre><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Polymorphic-variant (internal)<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#polymorphic-variant-internal"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="polymorphic-variant-internal" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">Polymorphic variants allow users to use the types without declaring them first:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RE</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-reasonml "><span class="hljs-keyword">let</span> u = <span class="hljs-number">3</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-constructor">`hello</span>
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">It will generate</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> u = {<span class="hljs-attr">HASH</span> : MAGIC_NUMBER, <span class="hljs-attr">VAL</span>: <span class="hljs-number">3</span> }
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">The field of <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">HASH</code> is the hash of name <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">&quot;hello&quot;</code>, while the <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">VAL</code> is the payload</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">IC friendliness<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#ic-friendliness-2"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="ic-friendliness-2" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Polymorphic variants are always in a perfect position for IC, the compiler can ensure all generated objects are of the same shape.
This is because the payload is not unpacked; it is always just one payload.</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Polymorphic variant in debug mode<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#polymorphic-variant-in-debug-mode"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="polymorphic-variant-in-debug-mode" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">In debug mode, similar to variant, we carry the name in generated code for debugging,</p><p class="md-p md:leading-5 text-gray-80 md:text-16">So instead of</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> u = {<span class="hljs-attr">HASH</span> : MAGIC_NUMBER, <span class="hljs-attr">VAL</span>: <span class="hljs-number">3</span> }
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">It will generate</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">JS</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-js "><span class="hljs-keyword">var</span> u = {<span class="hljs-attr">HASH</span> : MAGIC_NUMBER, <span class="hljs-attr">VAL</span>: <span class="hljs-number">3</span> , [<span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&quot;name&quot;</span>)] : <span class="hljs-string">&quot;hello&quot;</span>}
</code></div></div></div></pre><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Conclusion<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#conclusion"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="conclusion" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">BuckleScript users will  profit from better runtime performance and a better debugging experience for various data types, such as variants,
exceptions, lazy values and more since version 8.0.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Happy Hacking!</p><div class="mt-12"><div class="block border-t border-gray-20"></div><div class="pt-20 flex flex-col items-center"><div class="text-3xl sm:text-32 text-center text-gray-95 font-medium">Want to read more?</div><a class="text-fire hover:text-fire-70" href="/blog">Back to Overview<svg class="fill-current ml-2 inline-block" height="11.769" width="18" viewBox="0 0 18 11.769"><defs><clipPath id="prefix__a"><path clip-rule="evenodd" d="M12.121-16.823a.67.67 0 00-.907 0 .566.566 0 000 .835l4.6 4.277H.635A.611.611 0 000-11.12a.617.617 0 00.635.6h15.179l-4.6 4.269a.576.576 0 000 .844.67.67 0 00.907 0L17.81-10.7a.553.553 0 000-.835z" fill="current" transform="translate(0 17)"></path></clipPath><clipPath id="prefix__b"><path class="prefix__b" d="M-297 336.231h747.692V-534H-297z" transform="translate(297 534)"></path></clipPath></defs><g clip-path="url(#prefix__a)"><g clip-path="url(#prefix__b)" transform="translate(-205.615 -357.923)"><path class="prefix__b" d="M202.154 354.462h24.923v18.692h-24.923z"></path></g></g></svg></a></div></div></div></div></div></main></div><footer class="flex justify-center border-t border-gray-10"><div class="flex flex-col md:flex-row justify-between max-w-1280 w-full px-8 py-16 text-gray-95 "><div><img class="w-40 mb-5" src="/static/rescript_logo_black.svg"/><div class="text-16"><p>© 2020 The ReScript Project</p><p>Software distribution powered by <a class="no-underline text-fire hover:underline" href="https://www.keycdn.com/" rel="noopener noreferrer" target="_blank">KeyCDN</a>.</p></div></div><div class="flex flex-col space-y-16 md:flex-row mt-16 md:mt-0 md:ml-16 md:space-y-0 md:space-x-16"><div><span class="block text-gray-60 tracking-wide text-14 uppercase mb-4">About</span><ul class="text-16 text-gray-80-tr space-y-2"><li><a class="hover:underline hover:pointer" href="/community#core-team">Team</a></li><li><a class="hover:underline hover:pointer" href="https://rescript-association.org" target="_blank">ReScript Association</a></li></ul></div><div><span class="block text-gray-60 tracking-wide text-14 uppercase mb-4">Find us on</span><div class="flex space-x-3 text-gray-100"><a class="hover:pointer hover:text-gray-60-tr" href="https://github.com/rescript-lang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" height="17.79" width="18.236" viewBox="0 0 18.236 17.79"><g transform="translate(8 -5.365)"><path d="M17.013,9.906a9.078,9.078,0,0,0-3.318-3.318A8.918,8.918,0,0,0,9.118,5.365,8.919,8.919,0,0,0,4.541,6.588,9.077,9.077,0,0,0,1.223,9.906,8.919,8.919,0,0,0,0,14.483a8.861,8.861,0,0,0,1.739,5.36,8.93,8.93,0,0,0,4.493,3.294.531.531,0,0,0,.475-.083.464.464,0,0,0,.154-.356q0-.036-.006-.641T6.85,21l-.273.047a3.484,3.484,0,0,1-.659.042,5.02,5.02,0,0,1-.825-.083,1.844,1.844,0,0,1-.8-.356,1.506,1.506,0,0,1-.522-.73l-.119-.273a2.966,2.966,0,0,0-.374-.605,1.432,1.432,0,0,0-.516-.451l-.083-.06a.871.871,0,0,1-.154-.143.651.651,0,0,1-.107-.166q-.036-.083.059-.137a.77.77,0,0,1,.344-.053l.237.035a1.733,1.733,0,0,1,.588.285,1.916,1.916,0,0,1,.576.617,2.093,2.093,0,0,0,.659.742,1.4,1.4,0,0,0,.778.255,3.376,3.376,0,0,0,.677-.059,2.362,2.362,0,0,0,.534-.178,1.924,1.924,0,0,1,.582-1.223,8.129,8.129,0,0,1-1.217-.214,4.845,4.845,0,0,1-1.116-.463,3.2,3.2,0,0,1-.956-.8,3.822,3.822,0,0,1-.623-1.247A5.928,5.928,0,0,1,3.3,14.007a3.463,3.463,0,0,1,.938-2.446A3.192,3.192,0,0,1,4.321,9.14a1.664,1.664,0,0,1,1.021.16,7.138,7.138,0,0,1,.991.457q.315.19.5.321a8.574,8.574,0,0,1,4.559,0l.451-.285a6.389,6.389,0,0,1,1.092-.522,1.556,1.556,0,0,1,.962-.13A3.161,3.161,0,0,1,14,11.562a3.463,3.463,0,0,1,.938,2.446,5.994,5.994,0,0,1-.243,1.787,3.674,3.674,0,0,1-.629,1.247,3.319,3.319,0,0,1-.962.789,4.855,4.855,0,0,1-1.116.463,8.121,8.121,0,0,1-1.217.214,2.115,2.115,0,0,1,.617,1.686v2.5a.473.473,0,0,0,.149.356.516.516,0,0,0,.469.083A8.929,8.929,0,0,0,16.5,19.842a8.863,8.863,0,0,0,1.739-5.36A8.926,8.926,0,0,0,17.013,9.906Z" transform="translate(-8 0)"></path></g></svg></a><a class="hover:pointer hover:text-gray-60-tr" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" viewBox="0 0 15.53 12.71"><path d="M5.794,12.711a13.325,13.325,0,0,1-2.058-.163A9.659,9.659,0,0,1,.92,11.523L0,11.02l1-.328c1.089-.358,1.751-.58,2.571-.928A3.421,3.421,0,0,1,1.809,7.726l-.232-.7.19.029a3.456,3.456,0,0,1-.433-.534A3.276,3.276,0,0,1,.779,4.57l.044-.614L1.19,4.1a3.437,3.437,0,0,1-.333-.934A3.552,3.552,0,0,1,1.235.774l.32-.588L1.984.7A7.883,7.883,0,0,0,7.091,3.575a3.054,3.054,0,0,1,.185-1.623A3.038,3.038,0,0,1,8.511.536,3.71,3.71,0,0,1,10.664.008a3.439,3.439,0,0,1,2.114.872,7.1,7.1,0,0,0,.774-.258c.17-.064.362-.136.6-.219L15.042.1l-.579,1.652.119-.008L15.53,1.7l-.56.765c-.032.044-.04.056-.052.073-.045.068-.1.153-.87,1.179a1.448,1.448,0,0,0-.271.943,8.916,8.916,0,0,1-.487,3.586,6.346,6.346,0,0,1-1.7,2.524,7.524,7.524,0,0,1-3.566,1.724A10.979,10.979,0,0,1,5.794,12.711Zm0,0" transform="translate(0 -0.001)"></path></svg></a><a class="hover:pointer hover:text-gray-60-tr" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" viewBox="0 0 24 24"><path d="M12.103 0C18.666 0 24 5.485 24 11.997c0 6.51-5.33 11.99-11.9 11.99L0 24V11.79C0 5.28 5.532 0 12.103 0zm.116 4.563a7.395 7.395 0 00-6.337 3.57 7.247 7.247 0 00-.148 7.22L4.4 19.61l4.794-1.074a7.424 7.424 0 008.136-1.39 7.256 7.256 0 001.737-7.997 7.375 7.375 0 00-6.84-4.585h-.008z"></path></svg></a></div></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"path":"archive/2020-06-22-overview-of-new_encoding.mdx"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"overview-of-new_encoding"},"buildId":"S5HYsHOQBCfuIMfZ4LslI","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-14689e3e48c095b2d3e7.js"></script><script src="/_next/static/chunks/webpack-4e582efe68f401073f15.js" async=""></script><script src="/_next/static/chunks/framework-998f5b95ac98f74bab8f.js" async=""></script><script src="/_next/static/chunks/43481-280514135c7b3adb9781.js" async=""></script><script src="/_next/static/chunks/62168-646866730a0afa3b7493.js" async=""></script><script src="/_next/static/chunks/main-7e2e753fca1f45eed2e0.js" async=""></script><script src="/_next/static/chunks/53706-d09a138e6cd709547d22.js" async=""></script><script src="/_next/static/chunks/25396-7c202dfca7dd4a484721.js" async=""></script><script src="/_next/static/chunks/49909-39e42e72225fd86b3fa0.js" async=""></script><script src="/_next/static/chunks/8792-02da446de816dae9d9f0.js" async=""></script><script src="/_next/static/chunks/13692-5739462c0ba24bf7f2e2.js" async=""></script><script src="/_next/static/chunks/pages/_app-85ce0337ab254104dc2d.js" async=""></script><script src="/_next/static/chunks/9f96d65d-168609d0476f309da299.js" async=""></script><script src="/_next/static/chunks/21504-78e44067594ba989bf0a.js" async=""></script><script src="/_next/static/chunks/49225-9a2e43fcfa75940fbbb7.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-cc9e0ec282e93bf455bc.js" async=""></script><script src="/_next/static/S5HYsHOQBCfuIMfZ4LslI/_buildManifest.js" async=""></script><script src="/_next/static/S5HYsHOQBCfuIMfZ4LslI/_ssgManifest.js" async=""></script><script async="" defer="" src="https://scripts.simpleanalyticscdn.com/latest.js"></script><noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt=""/></noscript></body></html>