<!DOCTYPE html><html><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><link href="/static/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/static/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/static/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/static/favicon/site.webmanifest" rel="manifest"/><meta content="image/jpeg" property="og:image:type"/><link title="ReScript Blog" href="/blog/feed.xml" rel="alternate" type="application/rss+xml"/><title>useEffect Hook | React</title><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, minimal-ui" name="viewport"/><meta content="Details about the useEffect React hook in ReScript" name="description"/><meta content="" name="keywords"/><link href="/docs/react/latest/hooks-effect" rel="canonical"/><link href="/static/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/static/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/static/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/static/favicon/site.webmanifest" rel="manifest"/><meta content="ReScript Documentation" property="og:site_name"/><meta content="en_US" property="og:locale"/><meta content="useEffect Hook | React" property="og:title"/><meta content="Details about the useEffect React hook in ReScript" property="og:description"/><meta content="useEffect Hook | React" name="twitter:title"/><meta content="Details about the useEffect React hook in ReScript" name="twitter:description"/><meta content="@reasonml" name="twitter:site"/><meta content="@ReasonAssoc" name="twitter:creator"/><meta content="image/jpeg" property="og:image:type"/><meta content="summary_large_image" name="twitter:card"/><link title="ReScript Blog" href="/blog/feed.xml" rel="alternate" type="application/rss+xml"/><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/43ae73b4aa2a5c61cefe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/43ae73b4aa2a5c61cefe.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-4e582efe68f401073f15.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-998f5b95ac98f74bab8f.js" as="script"/><link rel="preload" href="/_next/static/chunks/43481-280514135c7b3adb9781.js" as="script"/><link rel="preload" href="/_next/static/chunks/62168-646866730a0afa3b7493.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-7e2e753fca1f45eed2e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/53706-d09a138e6cd709547d22.js" as="script"/><link rel="preload" href="/_next/static/chunks/25396-7c202dfca7dd4a484721.js" as="script"/><link rel="preload" href="/_next/static/chunks/49909-39e42e72225fd86b3fa0.js" as="script"/><link rel="preload" href="/_next/static/chunks/8792-02da446de816dae9d9f0.js" as="script"/><link rel="preload" href="/_next/static/chunks/13692-5739462c0ba24bf7f2e2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-85ce0337ab254104dc2d.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/react/latest/hooks-effect-38f94b498861c70ef8ac.js" as="script"/></head><body><div id="__next"><div class="mt-16 min-w-320 theme-reason"><div class="w-full"><nav class="fixed top-0 z-50 px-4 flex xs:justify-center w-full h-16 bg-gray-95 shadow text-white-80 text-14" id="header" style="min-width:20rem"><div class="flex justify-between items-center h-full w-full max-w-1280"><div class="h-8 w-8 lg:h-10 lg:w-32"><a class="block hover:cursor-pointer w-full h-full flex justify-center items-center font-bold" href="/"><img class="lg:hidden" src="/static/nav-logo@2x.png"/><img class="hidden lg:block" src="/static/nav-logo-full@2x.png"/></a></div><div class="flex items-center xs:justify-between w-full bg-gray-95 sm:h-auto sm:relative"><div class="flex ml-10 space-x-5 w-full max-w-320" style="max-width:26rem"><div class="relative"><div class="flex items-center"><button class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px border-none flex items-center hover:cursor-pointer " tabindex="0"><span class="">Docs</span></button></div><div class="hidden fixed left-0 overflow-y-scroll overflow-x-hidden border-gray-80 border-gray-40 min-w-320 w-full h-full bg-white sm:overflow-y-auto sm:bg-transparent sm:h-auto sm:justify-center sm:rounded-bl-xl sm:rounded-br-xl sm:shadow" style="margin-top:1rem"><div class="w-full"><div class="relative w-full bg-white pb-32 min-h-full sm:pb-0 text-gray-60 text-14 rounded-bl-xl rounded-br-xl"><div class="flex justify-center w-full py-2 border-b border-gray-10"><div class="px-4 w-full space-x-2 max-w-1280 "><select class="text-12 border border-gray-10 text-gray-80 inline-block rounded px-4 py-1 font-semibold " name="versionSelection"><option selected="" class="py-4" value="latest">v9.1</option><option class="py-4" value="v9.0.0">v8.2 - v9.0</option><option class="py-4" value="v8.0.0">v6.0 - v8.2</option></select><span class="text-gray-40 text-12">This is the latest docs version</span></div></div><div class="flex justify-center"><div class="w-full sm:grid sm:grid-cols-3 max-w-1280"><div class="flex px-4 sm:justify-center border-r border-gray-10 pt-8 pb-10"><div><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Quick Links</div><div><ul class="space-y-2 ml-2 mt-6"><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/introduction">Overview</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/overview">Language Features</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/embed-raw-javascript">JS Interop</a></li><li><span class="text-fire-40 mr-2">-</span><a class="hover:text-fire-50" href="/docs/manual/latest/build-overview">Build System</a></li></ul></div></div></div><div class="flex px-4 sm:h-full sm:justify-center border-r border-gray-10 pt-8"><div class="w-full pb-16" style="max-width:19.625rem"><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Documentation</div><div><div class="mt-6"><a class="" href="/docs/manual/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_manual@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Language Manual</span></div><div class="block text-14 text-gray-60 text-gray-60">Reference for all language features</div></div></div></a><a class="" href="/docs/react/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_rescript_react@2x.png"/><div><div class="flex items-center text-16 font-medium text-fire-40"><span>ReScript &amp; React</span></div><div class="block text-14 text-gray-60 text-fire-40">First class bindings for ReactJS</div></div></div></a><a class="" href="/docs/gentype/latest/introduction"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_gentype@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>GenType</span></div><div class="block text-14 text-gray-60 text-gray-60">Seamless TypeScript &amp; Flow integration</div></div></div></a><a class="" href="https://github.com/reason-association/reanalyze" rel="noopener noreferrer" target="_blank"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><img style="width:2.1875rem" src="/static/ic_reanalyze@2x.png"/><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Reanalyze</span><svg class="stroke-current inline-block ml-2 w-4 h-4" height="16.122" width="16.098" viewBox="0 0 16.098 16.122" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-1046.283 -564.299)"><path d="M1987.235-1783.927h-4.849v11.17h11.164v-5.113" fill="none" stroke-width="1.5" transform="translate(-935.353 2352.43)"></path><g transform="translate(1051.72 570.607) rotate(-45)"><path d="M0,0H7.467" fill="none" stroke-width="1.5" transform="translate(0 3.128)"></path><path d="M0,0,3.078,3.078,0,6.156" fill="none" stroke-width="1.5" transform="translate(4.252 0)"></path></g></g></svg></div><div class="block text-14 text-gray-60 text-gray-60">Dead Code &amp; Termination analysis</div></div></div></a></div></div></div></div><div class="flex px-4 sm:h-full sm:justify-center pb-12 pt-8 pb-10"><div class="w-full" style="max-width:19.625rem"><div class="text-12 font-medium text-gray-100 tracking-wide uppercase subpixel-antialiased">Exploration</div><div class="mt-6"><a class="" href="/packages"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><div class="w-6 h-6"><img class="w-full" src="/static/ic_package.svg"/></div><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Packages</span></div><div class="block text-14 text-gray-60 text-gray-60">Explore third party libraries and bindings</div></div></div></a><a class="" href="/syntax-lookup"><div class="hover:bg-gray-5 hover:shadow hover:-mx-8 hover:px-8 hover:cursor-pointer active:bg-gray-10 py-4 flex space-x-4 items-start rounded-xl"><div class="-mr-2 flex w-6 h-6 justify-center items-center"><img class="w-4 h-4" src="/static/ic_search.svg"/></div><div><div class="flex items-center text-16 font-medium text-gray-95"><span>Syntax Lookup</span></div><div class="block text-14 text-gray-60 text-gray-60">Discover all syntax constructs</div></div></div></a></div></div></div></div></div><img class="hidden xl:block absolute bottom-0 right-0" style="max-width:27.8rem" src="/static/illu_index_rescript@2x.png"/></div></div></div></div><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/docs/manual/latest/api">API</a><a class="hidden xs:block no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/try">Playground</a><a class="hidden xs:block no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/blog">Blog</a><a class="hidden xs:block no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/community">Community</a></div><div class="hidden md:flex items-center"><div class="hidden sm:block mr-6"><div class=" bg-gray-100 border border-gray-80 hover:text-white hover:cursor-pointer flex justify-center p-2 px-3 rounded-lg"><input type="text" class="transition-all ease-in-out duration-150 text-white bg-gray-100 border-none focus:outline-none w-0" id="docsearch"/><svg class="stroke-current w-5 h-5" height="19.203" width="19.203" viewBox="0 0 19.203 19.203"><g fill="none" stroke-linecap="round" stroke-width="2px" transform="translate(-2 -2)"><path d="M6.479,0A6.479,6.479,0,1,1,0,6.479,6.479,6.479,0,0,1,6.479,0Z" transform="translate(3 3)"></path><line stroke-linejoin="round" transform="translate(14.055 14.055)" x1="5.734" y1="5.734"></line></g></svg></div></div><a class="mr-5 no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://github.com/reason-association/rescript-lang.org#rescript-langorg" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" height="17.79" width="18.236" viewBox="0 0 18.236 17.79"><g transform="translate(8 -5.365)"><path d="M17.013,9.906a9.078,9.078,0,0,0-3.318-3.318A8.918,8.918,0,0,0,9.118,5.365,8.919,8.919,0,0,0,4.541,6.588,9.077,9.077,0,0,0,1.223,9.906,8.919,8.919,0,0,0,0,14.483a8.861,8.861,0,0,0,1.739,5.36,8.93,8.93,0,0,0,4.493,3.294.531.531,0,0,0,.475-.083.464.464,0,0,0,.154-.356q0-.036-.006-.641T6.85,21l-.273.047a3.484,3.484,0,0,1-.659.042,5.02,5.02,0,0,1-.825-.083,1.844,1.844,0,0,1-.8-.356,1.506,1.506,0,0,1-.522-.73l-.119-.273a2.966,2.966,0,0,0-.374-.605,1.432,1.432,0,0,0-.516-.451l-.083-.06a.871.871,0,0,1-.154-.143.651.651,0,0,1-.107-.166q-.036-.083.059-.137a.77.77,0,0,1,.344-.053l.237.035a1.733,1.733,0,0,1,.588.285,1.916,1.916,0,0,1,.576.617,2.093,2.093,0,0,0,.659.742,1.4,1.4,0,0,0,.778.255,3.376,3.376,0,0,0,.677-.059,2.362,2.362,0,0,0,.534-.178,1.924,1.924,0,0,1,.582-1.223,8.129,8.129,0,0,1-1.217-.214,4.845,4.845,0,0,1-1.116-.463,3.2,3.2,0,0,1-.956-.8,3.822,3.822,0,0,1-.623-1.247A5.928,5.928,0,0,1,3.3,14.007a3.463,3.463,0,0,1,.938-2.446A3.192,3.192,0,0,1,4.321,9.14a1.664,1.664,0,0,1,1.021.16,7.138,7.138,0,0,1,.991.457q.315.19.5.321a8.574,8.574,0,0,1,4.559,0l.451-.285a6.389,6.389,0,0,1,1.092-.522,1.556,1.556,0,0,1,.962-.13A3.161,3.161,0,0,1,14,11.562a3.463,3.463,0,0,1,.938,2.446,5.994,5.994,0,0,1-.243,1.787,3.674,3.674,0,0,1-.629,1.247,3.319,3.319,0,0,1-.962.789,4.855,4.855,0,0,1-1.116.463,8.121,8.121,0,0,1-1.217.214,2.115,2.115,0,0,1,.617,1.686v2.5a.473.473,0,0,0,.149.356.516.516,0,0,0,.469.083A8.929,8.929,0,0,0,16.5,19.842a8.863,8.863,0,0,0,1.739-5.36A8.926,8.926,0,0,0,17.013,9.906Z" transform="translate(-8 0)"></path></g></svg></a><a class="mr-5 no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" viewBox="0 0 15.53 12.71"><path d="M5.794,12.711a13.325,13.325,0,0,1-2.058-.163A9.659,9.659,0,0,1,.92,11.523L0,11.02l1-.328c1.089-.358,1.751-.58,2.571-.928A3.421,3.421,0,0,1,1.809,7.726l-.232-.7.19.029a3.456,3.456,0,0,1-.433-.534A3.276,3.276,0,0,1,.779,4.57l.044-.614L1.19,4.1a3.437,3.437,0,0,1-.333-.934A3.552,3.552,0,0,1,1.235.774l.32-.588L1.984.7A7.883,7.883,0,0,0,7.091,3.575a3.054,3.054,0,0,1,.185-1.623A3.038,3.038,0,0,1,8.511.536,3.71,3.71,0,0,1,10.664.008a3.439,3.439,0,0,1,2.114.872,7.1,7.1,0,0,0,.774-.258c.17-.064.362-.136.6-.219L15.042.1l-.579,1.652.119-.008L15.53,1.7l-.56.765c-.032.044-.04.056-.052.073-.045.068-.1.153-.87,1.179a1.448,1.448,0,0,0-.271.943,8.916,8.916,0,0,1-.487,3.586,6.346,6.346,0,0,1-1.7,2.524,7.524,7.524,0,0,1-3.566,1.724A10.979,10.979,0,0,1,5.794,12.711Zm0,0" transform="translate(0 -0.001)"></path></svg></a><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6 opacity-50 hover:opacity-100" viewBox="0 0 24 24"><path d="M12.103 0C18.666 0 24 5.485 24 11.997c0 6.51-5.33 11.99-11.9 11.99L0 24V11.79C0 5.28 5.532 0 12.103 0zm.116 4.563a7.395 7.395 0 00-6.337 3.57 7.247 7.247 0 00-.148 7.22L4.4 19.61l4.794-1.074a7.424 7.424 0 008.136-1.39 7.256 7.256 0 001.737-7.997 7.375 7.375 0 00-6.84-4.585h-.008z"></path></svg></a></div></div></div><button class="h-full px-4 xs:hidden flex items-center hover:text-white"><svg class="fill-current h-1 w-auto block " height="4" width="22" stroke="none" viewBox="0 0 22 4"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9)"></circle><circle cx="2" cy="2" r="2" transform="translate(18)"></circle></svg></button><div class="hidden sm:hidden flex-col fixed top-0 left-0 h-full w-full z-50 sm:w-9/12 bg-gray-100 sm:h-auto sm:flex sm:relative sm:flex-row sm:justify-between" style="min-width:20rem;top:4rem"><div class="border-gray-80 border-t"><ul><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><div class="opacity-75 hover:text-white hover:cursor-pointer bg-gray-80 flex items-center p-2 px-3 rounded"><svg class="stroke-current w-5 h-5 mr-3" height="19.203" width="19.203" viewBox="0 0 19.203 19.203"><g fill="none" stroke-linecap="round" stroke-width="2px" transform="translate(-2 -2)"><path d="M6.479,0A6.479,6.479,0,1,1,0,6.479,6.479,6.479,0,0,1,6.479,0Z" transform="translate(3 3)"></path><line stroke-linejoin="round" transform="translate(14.055 14.055)" x1="5.734" y1="5.734"></line></g></svg><input type="text" class="w-32 bg-gray-80 focus:outline-none " id="docsearch-mobile"/></div></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/try">Playground</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="no-underline block text-inherit hover:cursor-pointer hover:text-fire-30 text-gray-40 mb-px" href="/blog">Blog</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank">Twitter</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://github.com/reason-association/rescript-lang.org#rescript-langorg" rel="noopener noreferrer" target="_blank">Github</a></li><li class="font-normal mx-4 py-5 text-gray-20 border-b border-gray-80"><a class="block hover:cursor-pointer hover:text-white text-gray-60" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank">Forum</a></li></ul></div></div></nav><div class="hidden z-40 bg-gray-10-tr w-full h-full bottom-0" style="backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px)"></div><div class="flex lg:justify-center"><div class="flex w-full max-w-1280 md:mx-8"><div class="hidden  md:block md:w-48 md:-ml-4 lg:w-1/5 md:h-auto md:relative overflow-y-visible bg-white" id="sidebar"><aside class="relative top-0 px-4 w-full block md:top-16 md:pt-16 md:sticky border-r border-gray-5 overflow-y-auto scrolling-touch pb-24" id="sidebar-content" style="height:calc(100vh - 4.5rem"><div class="flex justify-between"><div class="w-3/4 md:w-full"></div><button class="md:hidden h-16"><svg class="fill-current " height="12.728" width="12.728"><path d="M12.728 11.313l-1.414 1.414L0 1.414 1.414-.001z"></path><path d="M11.314 0l1.414 1.414L1.415 12.728 0 11.314z"></path></svg></button></div><div class="flex justify-between text-fire font-medium items-baseline">rescript-react<select class="text-12 border border-gray-10 text-gray-80 inline-block rounded px-4 py-1 font-semibold " name="versionSelection"><option selected="" class="py-4" value="latest">v0.10</option></select></div><div class="mb-56"><div><div class="my-10"><div class="font-sans font-bold text-gray-40 tracking-wide text-12 uppercase mt-5">Overview</div><ul class="mt-2 text-14 font-medium"><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/introduction">Introduction</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/installation">Installation</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/migrate-from-reason-react">Migrate from ReasonReact</a></li></ul></div></div><div><div class="my-10"><div class="font-sans font-bold text-gray-40 tracking-wide text-12 uppercase mt-5">Main Concepts</div><ul class="mt-2 text-14 font-medium"><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/elements-and-jsx">Elements &amp; JSX</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/rendering-elements">Rendering Elements</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/components-and-props">Components and Props</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/arrays-and-keys">Arrays and Keys</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/refs-and-the-dom">Refs and the DOM</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/context">Context</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/styling">Styling</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/router">Router</a></li></ul></div></div><div><div class="my-10"><div class="font-sans font-bold text-gray-40 tracking-wide text-12 uppercase mt-5">Hooks &amp; State Management</div><ul class="mt-2 text-14 font-medium"><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-overview">Hooks &amp; State Management Overview</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2  bg-fire-10 text-fire leading-5 -ml-2 pl-2 font-medium block hover:bg-fire-10 " href="/docs/react/latest/hooks-effect">useEffect Hook</a><ul class="mt-2 py-1 mb-4 border-l border-fire"><li class="pl-2 mt-3 first:mt-1"><a class="font-medium block text-sm text-gray-40 leading-tight hover:text-gray-80" href="/docs/react/latest/hooks-effect#what-are-effects">What are Effects?</a></li><li class="pl-2 mt-3 first:mt-1"><a class="font-medium block text-sm text-gray-40 leading-tight hover:text-gray-80" href="/docs/react/latest/hooks-effect#basic-usage">Basic Usage</a></li><li class="pl-2 mt-3 first:mt-1"><a class="font-medium block text-sm text-gray-40 leading-tight hover:text-gray-80" href="/docs/react/latest/hooks-effect#examples">Examples</a></li><li class="pl-2 mt-3 first:mt-1"><a class="font-medium block text-sm text-gray-40 leading-tight hover:text-gray-80" href="/docs/react/latest/hooks-effect#effect-dependencies">Effect Dependencies</a></li></ul></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-state">useState Hook</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-reducer">useReducer Hook</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-context">useContext Hook</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-ref">useRef Hook</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/hooks-custom">Build A Custom Hook</a></li></ul></div></div><div><div class="my-10"><div class="font-sans font-bold text-gray-40 tracking-wide text-12 uppercase mt-5">Guides</div><ul class="mt-2 text-14 font-medium"><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/beyond-jsx">Beyond JSX</a></li><li class="block mt-1 leading-4"><a class="truncate block py-1 md:h-auto tracking-tight text-gray-80 rounded-sm  hover:bg-gray-5 hover:-ml-2 hover:py-1 hover:pl-2 " href="/docs/react/latest/forwarding-refs">Forwarding Refs</a></li></ul></div></div></div></aside></div><main class="px-4 w-full pt-16 md:ml-12 lg:mr-8 mb-32 md:max-w-576 lg:max-w-740"><div class="z-10 fixed border-b shadow top-16 left-0 pl-4 bg-white w-full py-4 md:relative md:border-none md:shadow-none md:p-0 md:top-auto flex items-center"><button class=" md:hidden mr-3"><img class="h-4" src="/static/ic_sidebar_drawer.svg"/></button><div class="truncate overflow-x-auto touch-scroll flex items-center space-x-4 md:justify-between mr-4 w-full"><div class="w-full font-medium overflow-x-auto text-12 text-gray-60"><a href="/docs/latest">Docs</a><span> / <a href="/docs/react/latest/introduction">rescript-react</a></span><span> / <span>useEffect Hook</span></span></div><a class="inline text-14 hover:underline text-fire" href="https://github.com/reason-association/rescript-lang.org/blob/master/pages/docs/react/latest/hooks-effect.mdx" rel="noopener noreferrer" target="_blank">Edit</a></div></div><div class="mt-10"><h1 class="text-42 tracking-tight leading-1 mb-5 font-sans font-medium text-gray-95">useEffect</h1><div class="text-21 mt-8 mb-4"><p class="md-p md:leading-5 text-gray-80 md:text-16">The <em>Effect</em> Hook lets you perform side effects in function components.</p></div><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">What are Effects?<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#what-are-effects"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="what-are-effects" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">Common examples for (side) effects are data fetching, setting up a subscription, and manually changing the DOM in React components.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">There are two common kinds of side effects in React components: those that don’t require cleanup, and those that do. We&#x27;ll look into the distinction later on in our examples, but first let&#x27;s see how the interface looks like.</p><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Basic Usage<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#basic-usage"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="basic-usage" style="position:absolute;top:-7rem"></a></span></span></h2><div class="md-codetab mt-8 mb-8 -mx-6 xs:mx-0"><div class="relative pt-6 w-full rounded-none text-gray-80"><div class="absolute flex w-full overflow-auto scrolling-touch font-sans bg-transparent text-14 text-gray-40 " style="margin-top:-30px"><div class="flex ml-2 xs:ml-0"><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium text-gray-90 bg-gray-5 border-t-2 first:border-l" style="border-color:#f4646a #EDF0F2">ReScript</span><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium hover:text-gray-60 border-t-2 bg-gray-10 hover:cursor-pointer" style="border-color:transparent">JS Output</span></div><div class="flex-1 w-full bg-gray-10 border-b rounded-tr border-gray-10 items-center"><div class="flex items-center justify-end h-full pr-4 space-x-3"><a target="_blank" href="/try?code=PTAECUFcDsGdQIYDMAuBTATqNA3TBPUAYwHsBbABwBs10ATUDNaOzAKHDQSJQDpJYaAKJIkaHgAoJASlABeAHygA3m1CgQEGNlHiUsNaAByJaGg1gSWAMrk0U2YpUBfaW1dtPmqHFCmqhKZE5hgAlgDmABYoiKiYoGQkMCih0OGgKJHmpJSmzCgcXDz8giJiPAAMDvJKqure2mi6PAbqJmYWfjZ21U7KHh5sDb64BClk5gAGFBgkFACMk6CRCPBEK2lodIXcfALCzSjzvbWGwzrl+qAARqtbftCgM3Pzhu1o7gA0oADazwsAXTcQzAPngoww+HGU3+iy6oGmswoACYlis1htwlsdsV9mU9MiTiozqDGod4LdBAxTE8kfMNLS5si3nkvqAJLDvv9kdJgZxdiUDpcAMxEurGVnOb4culcpHIuVzYW8gDcXjAeMOABZeLqAOygADuoUyiCIpAwdFS6VYFGYrGgRHwIIykGo5gAVgIYlRQgBrcyakWeIA}"><svg class="stroke-current text-gray-20 hover:cursor-pointer hover:text-gray-80" height="16.122" width="16.098" viewBox="0 0 16.098 16.122" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-1046.283 -564.299)"><path d="M1987.235-1783.927h-4.849v11.17h11.164v-5.113" fill="none" stroke-width="1.5" transform="translate(-935.353 2352.43)"></path><g transform="translate(1051.72 570.607) rotate(-45)"><path d="M0,0H7.467" fill="none" stroke-width="1.5" transform="translate(0 3.128)"></path><path d="M0,0,3.078,3.078,0,6.156" fill="none" stroke-width="1.5" transform="translate(4.252 0)"></path></g></g></svg></a><button class="relative"><svg class="stroke-current text-gray-20 mt-px hover:cursor-pointer hover:text-gray-80" height="14" width="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke-linejoin="round" stroke-width="1.5" transform="rotate(180 98.375 84.763)"><path d="M186.571 159.35v-1.636a1.715 1.715 0 011.715-1.714h6a1.715 1.715 0 011.714 1.714v6a1.715 1.715 0 01-1.714 1.715H192.9"></path><rect height="9.429" width="9.429" rx="2" transform="translate(183.255 159.347)"></rect></g></svg></button></div></div></div><div class="px-4 lg:px-5 text-14 pb-4 pt-4 overflow-x-auto bg-gray-5 border-gray-10 xs:rounded-b-lg border"><pre><code class="hljs lang-res "><span class="hljs-comment">// Runs after every completed render</span>
<span class="hljs-module-identifier">React</span>.useEffect(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-comment">// Run effects</span>
  <span class="hljs-constructor">None</span> <span class="hljs-comment">// or Some(() =&gt; {})</span>
<span class="hljs-literal">}</span>)


<span class="hljs-comment">// Runs only once right after mounting the component</span>
<span class="hljs-module-identifier">React</span>.useEffect0(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-comment">// Run effects</span>
  <span class="hljs-constructor">None</span> <span class="hljs-comment">// or Some(() =&gt; {})</span>
<span class="hljs-literal">}</span>)

<span class="hljs-comment">// Runs everytime `prop1` has changed</span>
<span class="hljs-module-identifier">React</span>.useEffect1(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-comment">// Run effects based on prop1</span>
  <span class="hljs-constructor">None</span>
<span class="hljs-literal">}</span>, [prop1])

<span class="hljs-comment">// Runs everytime `prop1` or `prop2` has changed</span>
<span class="hljs-module-identifier">React</span>.useEffect2(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-comment">// Run effects based on prop1 / prop2</span>
  <span class="hljs-constructor">None</span>
<span class="hljs-literal">}</span>, (prop1, prop2))

<span class="hljs-module-identifier">React</span>.useEffect3(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-constructor">None</span>
<span class="hljs-literal">}</span>, (prop1, prop2, prop3));

<span class="hljs-comment">// useEffect4...7 with according dependency</span>
<span class="hljs-comment">// tuple just like useEffect3</span>

</code></pre></div></div></div><p class="md-p md:leading-5 text-gray-80 md:text-16"><code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect</code> receives a function that contains imperative, possibly effectful code, and returns a value <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">option&lt;unit =&gt; unit&gt;</code> as a potential cleanup function.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">A <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect</code> call may receive an additional array of dependencies (see <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect1</code> / <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect2...7</code>). The effect function will run whenever one of the provided dependencies has changed. More details on why this is useful <a class="no-underline text-fire hover:underline" href="#effect-dependencies" rel="noopener noreferrer">down below</a>.</p><p class="md-p md:leading-5 text-gray-80 md:text-16"><strong class="font-semibold text-gray-90">Note:</strong> You probably wonder why <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect1</code> receives an <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">array</code>, and <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect2</code> etc require a <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">tuple</code> (e.g. <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">(prop1, prop2)</code>) for the dependency list. That&#x27;s because a tuple can receive multiple values of different types, whereas an <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">array</code> only accepts values of identical types. It&#x27;s possible to replicate <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect2</code> by doing <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect1(fn, [1, 2])</code>, on other hand the type checker wouldn&#x27;t allow <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect1(fn, [1, &quot;two&quot;])</code>.</p><p class="md-p md:leading-5 text-gray-80 md:text-16"><code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect</code> will run its function after every completed render, while <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect0</code> will only run the effect on the first render (when the component has mounted).</p><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Examples<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#examples"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="examples" style="position:absolute;top:-7rem"></a></span></span></h2><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Effects without Cleanup<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#effects-without-cleanup"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="effects-without-cleanup" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Sometimes, we want to run some additional code after React has updated the DOM. Network requests, manual DOM mutations, and logging are common examples of effects that don’t require a cleanup. We say that because we can run them and immediately forget about them.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">As an example, let&#x27;s write a counter component that updates <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">document.title</code> on every render:</p><div class="md-codetab mt-8 mb-8 -mx-6 xs:mx-0"><div class="relative pt-6 w-full rounded-none text-gray-80"><div class="absolute flex w-full overflow-auto scrolling-touch font-sans bg-transparent text-14 text-gray-40 " style="margin-top:-30px"><div class="flex ml-2 xs:ml-0"><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium text-gray-90 bg-gray-5 border-t-2 first:border-l" style="border-color:#f4646a #EDF0F2">ReScript</span><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium hover:text-gray-60 border-t-2 bg-gray-10 hover:cursor-pointer" style="border-color:transparent">JS Output</span></div><div class="flex-1 w-full bg-gray-10 border-b rounded-tr border-gray-10 items-center"><div class="flex items-center justify-end h-full pr-4 space-x-3"><a target="_blank" href="/try?code=PTAEGEHsFcDsBcCmAnAdMxAoAtpAJtADaKgAikAxtNogqALygDemoo8AngA4nwDcrUAAEAbgENCoRAA8kyWBNB5K1WvABc7BqABEyqjQQ6BbIQGdE8KbJQLJF+ABUAlvGKaAFPAA0oM-GRnWABzAEoGAD5QOFdtHXhXYh1MAF9MTCEMMQp4VApIbC5IWDVMYitsMQBrEkYPcPooljZy0A98uB8-SyhOhtAAJURs3OgLAGV4MSQPAH1I0AAGUIFBIZHUMcQAUQAzXcQcj3qF5rZQSB5YMhVDeEE2fVUEAFoIhxc3RA8AAwBNGCgCiEZwUGp4UAAEiYACFEIRcgBJBCoeCQSaBELtGAIUIpdjOGhmACEP1CD1AADlilg2ClfCt0i1LBdYOAQWDtHNECJ4A0mhSHL0EB4uBgRAsxTzQABqUAARnJdNWzIqZmCcQB0CBHPBOllcrhCNQyNyaIxQWC2L6BrY8UJiDMyUEAB48M4RBEKS6uBEmOscqh-Jirdh1XiXcBfd6AEbQeBo67FdmgqpNAO5YOWjw6FOcmg6PGgSNxhPFL1sSPuz2pTBAA}"><svg class="stroke-current text-gray-20 hover:cursor-pointer hover:text-gray-80" height="16.122" width="16.098" viewBox="0 0 16.098 16.122" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-1046.283 -564.299)"><path d="M1987.235-1783.927h-4.849v11.17h11.164v-5.113" fill="none" stroke-width="1.5" transform="translate(-935.353 2352.43)"></path><g transform="translate(1051.72 570.607) rotate(-45)"><path d="M0,0H7.467" fill="none" stroke-width="1.5" transform="translate(0 3.128)"></path><path d="M0,0,3.078,3.078,0,6.156" fill="none" stroke-width="1.5" transform="translate(4.252 0)"></path></g></g></svg></a><button class="relative"><svg class="stroke-current text-gray-20 mt-px hover:cursor-pointer hover:text-gray-80" height="14" width="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke-linejoin="round" stroke-width="1.5" transform="rotate(180 98.375 84.763)"><path d="M186.571 159.35v-1.636a1.715 1.715 0 011.715-1.714h6a1.715 1.715 0 011.714 1.714v6a1.715 1.715 0 01-1.714 1.715H192.9"></path><rect height="9.429" width="9.429" rx="2" transform="translate(183.255 159.347)"></rect></g></svg></button></div></div></div><div class="px-4 lg:px-5 text-14 pb-4 pt-4 overflow-x-auto bg-gray-5 border-gray-10 xs:rounded-b-lg border"><pre><code class="hljs lang-res "><span class="hljs-comment">// Counter.re</span>
<span class="hljs-keyword">module</span> <span class="hljs-module-identifier">Document</span> = {
  <span class="hljs-keyword">type</span> t;
  <span class="hljs-attribute">@val</span> <span class="hljs-keyword">external</span> document: t <span class="hljs-operator">=</span> <span class="hljs-string">&quot;document&quot;</span>;
  <span class="hljs-attribute">@set</span> <span class="hljs-keyword">external</span> setTitle: (t, string) <span class="hljs-function">=&gt;</span> unit <span class="hljs-operator">=</span> <span class="hljs-string">&quot;title&quot;</span>
}

<span class="hljs-attribute">@react.component</span>
<span class="hljs-keyword">let</span> make <span class="hljs-operator">=</span> () <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-keyword">let</span> (count, setCount) <span class="hljs-operator">=</span> <span class="hljs-module-identifier">React</span>.useState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-number">0</span>);

  <span class="hljs-module-identifier">React</span>.useEffect(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    <span class="hljs-keyword">open</span> <span class="hljs-module-identifier">Document</span>
    document<span class="hljs-operator">-&gt;</span>setTitle(<span class="hljs-string">`You clicked ${Belt.Int.toString(count)} times!`</span>)
    <span class="hljs-constructor">None</span>
  <span class="hljs-literal">}</span>, );

  <span class="hljs-keyword">let</span> onClick <span class="hljs-operator">=</span> (_evt) <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    setCount(prev <span class="hljs-function">=&gt;</span> prev <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)
  <span class="hljs-literal">}</span>;

  <span class="hljs-keyword">let</span> msg <span class="hljs-operator">=</span> <span class="hljs-string">&quot;You clicked&quot;</span> <span class="hljs-operator">++</span> <span class="hljs-module-identifier">Belt</span>.<span class="hljs-module-identifier">Int</span>.toString(count) <span class="hljs-operator">++</span>  <span class="hljs-string">&quot;times&quot;</span>

  &lt;div&gt;
    &lt;p&gt;<span class="hljs-literal">{</span><span class="hljs-module-identifier">React</span>.string(msg)<span class="hljs-literal">}</span>&lt;/p&gt;
    &lt;button onClick&gt; <span class="hljs-literal">{</span><span class="hljs-module-identifier">React</span>.string(<span class="hljs-string">&quot;Click me&quot;</span>)<span class="hljs-literal">}</span> &lt;/button&gt;
  &lt;/div&gt;
<span class="hljs-literal">}</span>
</code></pre></div></div></div><p class="md-p md:leading-5 text-gray-80 md:text-16">In case we want to make the effects dependent on <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">count</code>, we can just use following <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect</code> call instead:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RES</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-res "> <span class="hljs-module-identifier">React</span>.useEffect1(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    <span class="hljs-keyword">open</span> <span class="hljs-module-identifier">Document</span>
    document<span class="hljs-operator">-&gt;</span>setTitle(<span class="hljs-string">`You clicked ${Belt.Int.toString(count)} times!`</span>)
    <span class="hljs-constructor">None</span>
  <span class="hljs-literal">}</span>, [count]);
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">Now instead of running an effect on every render, it will only run when <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">count</code> has a different value than in the render before.</p><h3 class="group text-21 mt-12 mb-3 tracking-tight leading-3 font-sans font-bold text-gray-95">Effects with Cleanup<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#effects-with-cleanup"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="effects-with-cleanup" style="position:absolute;top:-7rem"></a></span></span></h3><p class="md-p md:leading-5 text-gray-80 md:text-16">Earlier, we looked at how to express side effects that don’t require any cleanup. However, some effects do. For example, we might want to set up a subscription to some external data source. In that case, it is important to clean up so that we don’t introduce a memory leak!</p><p class="md-p md:leading-5 text-gray-80 md:text-16">Let&#x27;s look at an example that gracefully subscribes, and later on unsubscribes from some subscription API:</p><div class="md-codetab mt-8 mb-8 -mx-6 xs:mx-0"><div class="relative pt-6 w-full rounded-none text-gray-80"><div class="absolute flex w-full overflow-auto scrolling-touch font-sans bg-transparent text-14 text-gray-40 " style="margin-top:-30px"><div class="flex ml-2 xs:ml-0"><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium text-gray-90 bg-gray-5 border-t-2 first:border-l" style="border-color:#f4646a #EDF0F2">ReScript</span><span class="sm:px-4 flex-none px-4 inline-block p-1 first:rounded-tl font-medium hover:text-gray-60 border-t-2 bg-gray-10 hover:cursor-pointer" style="border-color:transparent">JS Output</span></div><div class="flex-1 w-full bg-gray-10 border-b rounded-tr border-gray-10 items-center"><div class="flex items-center justify-end h-full pr-4 space-x-3"><a target="_blank" href="/try?code=PTAEDECcEsFMDsAmBlALgQ1QVwM4DpJYcAoYgWwHtEsAbWUAYQAtMBBABQElQBeUAb2KhQIUJzLoA5tHjpIAT1CSaFAEboaNRegBu6aDXSq6jFqg7cAZhUihEsSqAAOWSE4o4iQ0KnlP6OBjYOLwCoNA4APLwNDKwAFygqhQUNKAAvgDc3gACemmwAB6osJCyaThYqjgAxjCqsAAqFFBwSGiYuIkAFIEw8JIANKCBnSE8AHygWPDQqACUvFMzc6EARJXVddANza0IKEG4a9nCeRqgRSVlFzObtfWwUBRk++1HOD19MkMjH0vTWYLAErVDrO5VB47J6QF5vQ5jE7EdKkXz+P6Yeh8SKWSyxeD0AA+oAAMhR0IgfqBidF8bBssQcoR0DVUHgai93AT4KhiHQwRIANZY0DdAB+lhgB04iES3wGi0mAm8-NFoxKw08qA6JUVoAASrAWWzcLAdbBugB9AE4vFxeakYSG414U0AUVxsFZ3W6iqmgmEwlVLCQdB1uGY6AGIt6Hz9ysDga15qtAIDiaTHzwkfMXDwEVpcVAAH5QIWCaBEra6d5E+kHXXHYGcxY8PdtrsWlL3mNupK2ogZcMQ4gwx9I9H5qck7BtUELdalWSKT8p02g7PQDU6FGsE5Qr607Xm2ZWxCto9nq9uwjgn2b0PQCOx2MJ5JYA3Ayjj8gXhbt0a8B7p+9ZNqqJTFKEOAAO5zDUTCxpiizpsINK4nSAL9tKiCgAA1LhoBrOEIQUOhcRrMeNIxEWSpYUgMp4QRRERKAFDUQSFGJsSy6UgMAJrCoK4DHgImcRkTYADyUjoEzHvwzqsm2qD9JI3QQQsKLCBJwDSbJKJAA}"><svg class="stroke-current text-gray-20 hover:cursor-pointer hover:text-gray-80" height="16.122" width="16.098" viewBox="0 0 16.098 16.122" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-1046.283 -564.299)"><path d="M1987.235-1783.927h-4.849v11.17h11.164v-5.113" fill="none" stroke-width="1.5" transform="translate(-935.353 2352.43)"></path><g transform="translate(1051.72 570.607) rotate(-45)"><path d="M0,0H7.467" fill="none" stroke-width="1.5" transform="translate(0 3.128)"></path><path d="M0,0,3.078,3.078,0,6.156" fill="none" stroke-width="1.5" transform="translate(4.252 0)"></path></g></g></svg></a><button class="relative"><svg class="stroke-current text-gray-20 mt-px hover:cursor-pointer hover:text-gray-80" height="14" width="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke-linejoin="round" stroke-width="1.5" transform="rotate(180 98.375 84.763)"><path d="M186.571 159.35v-1.636a1.715 1.715 0 011.715-1.714h6a1.715 1.715 0 011.714 1.714v6a1.715 1.715 0 01-1.714 1.715H192.9"></path><rect height="9.429" width="9.429" rx="2" transform="translate(183.255 159.347)"></rect></g></svg></button></div></div></div><div class="px-4 lg:px-5 text-14 pb-4 pt-4 overflow-x-auto bg-gray-5 border-gray-10 xs:rounded-b-lg border"><pre><code class="hljs lang-res "><span class="hljs-comment">// FriendStatus.res</span>

<span class="hljs-keyword">module</span> <span class="hljs-module-identifier">ChatAPI</span> = {
  <span class="hljs-comment">// Imaginary globally available ChatAPI for demo purposes</span>
  <span class="hljs-keyword">type</span> status <span class="hljs-operator">=</span> <span class="hljs-literal">{</span> isOnline: bool };
  <span class="hljs-attribute">@val</span> <span class="hljs-keyword">external</span> subscribeToFriendStatus: (string, status <span class="hljs-function">=&gt;</span> unit) <span class="hljs-function">=&gt;</span> unit <span class="hljs-operator">=</span> <span class="hljs-string">&quot;subscribeToFriendStatus&quot;</span>;
  <span class="hljs-attribute">@val</span> <span class="hljs-keyword">external</span> unsubscribeFromFriendStatus: (string, status <span class="hljs-function">=&gt;</span> unit) <span class="hljs-function">=&gt;</span> unit <span class="hljs-operator">=</span> <span class="hljs-string">&quot;unsubscribeFromFriendStatus&quot;</span>;
<span class="hljs-literal">}</span>

<span class="hljs-keyword">type</span> state <span class="hljs-operator">=</span> <span class="hljs-constructor">Offline</span> | <span class="hljs-constructor">Loading</span> | <span class="hljs-constructor">Online</span>;

<span class="hljs-attribute">@react.component</span>
<span class="hljs-keyword">let</span> make <span class="hljs-operator">=</span> (~friendId: string) <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-keyword">let</span> (state, setState) <span class="hljs-operator">=</span> <span class="hljs-module-identifier">React</span>.useState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-constructor">Offline</span>)

  <span class="hljs-module-identifier">React</span>.useEffect(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    <span class="hljs-keyword">let</span> handleStatusChange <span class="hljs-operator">=</span> (status) <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
      setState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
        status.<span class="hljs-module-identifier">ChatAPI</span>.isOnline ? <span class="hljs-constructor">Online</span> : <span class="hljs-constructor">Offline</span>
      <span class="hljs-literal">}</span>)
    <span class="hljs-literal">}</span>

    <span class="hljs-module-identifier">ChatAPI</span>.subscribeToFriendStatus(friendId, handleStatusChange);
    setState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-constructor">Loading</span>);

    <span class="hljs-keyword">let</span> cleanup <span class="hljs-operator">=</span> () <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
      <span class="hljs-module-identifier">ChatAPI</span>.unsubscribeFromFriendStatus(friendId, handleStatusChange)
    <span class="hljs-literal">}</span>

    <span class="hljs-constructor">Some</span>(cleanup)
  <span class="hljs-literal">}</span>)

  <span class="hljs-keyword">let</span> text <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span>(state) <span class="hljs-literal">{</span>
    | <span class="hljs-constructor">Offline</span> <span class="hljs-function">=&gt;</span> friendId <span class="hljs-operator">++</span> <span class="hljs-string">&quot; is offline&quot;</span>
    | <span class="hljs-constructor">Online</span> <span class="hljs-function">=&gt;</span> friendId <span class="hljs-operator">++</span> <span class="hljs-string">&quot; is online&quot;</span>
    | <span class="hljs-constructor">Loading</span> <span class="hljs-function">=&gt;</span> <span class="hljs-string">&quot;loading...&quot;</span>
  <span class="hljs-literal">}</span>

  &lt;div&gt;
    <span class="hljs-literal">{</span><span class="hljs-module-identifier">React</span>.string(text)<span class="hljs-literal">}</span>
  &lt;/div&gt;
<span class="hljs-literal">}</span>
</code></pre></div></div></div><h2 class="group mt-12 mb-3 text-28 tracking-tight leading-1 font-sans font-bold text-gray-95">Effect Dependencies<span class="ml-2"><span class="inline group relative"><a class="invisible text-gray-60 opacity-50 text-inherit hover:opacity-100 hover:text-gray-60 hover:cursor-pointer group-hover:visible" href="#effect-dependencies"><svg class="fill-current inline-block align-middle text-gray-20" height="0.8em" width="0.8em" viewBox="0 0 20.003 19.944"><path d="M11.927 7.908a4.819 4.819 0 00-3.968-1.3 5.091 5.091 0 00-2.921 1.508L1.47 11.684a4.82 4.82 0 00.192 7.122 4.994 4.994 0 006.76-.4l3.7-3.776a.109.109 0 00-.067-.184s-.649.029-1.132.006a10.116 10.116 0 01-1.35-.226.308.308 0 00-.243.088l-2.529 2.609a2.733 2.733 0 01-3.583.319 2.64 2.64 0 01-.247-3.951l3.755-3.753a2.7 2.7 0 013.654-.073.108.108 0 00.15 0l1.4-1.4a.114.114 0 00-.003-.157z"></path><path d="M8.076 12.036a4.822 4.822 0 003.967 1.3 5.089 5.089 0 002.922-1.509l3.568-3.568a4.818 4.818 0 00-.192-7.121 5 5 0 00-6.761.4l-3.7 3.777a.108.108 0 00.067.183s.648-.028 1.132-.006a10.151 10.151 0 011.35.226.3.3 0 00.243-.088l2.529-2.608a2.732 2.732 0 013.581-.319 2.638 2.638 0 01.249 3.95l-3.755 3.754a2.706 2.706 0 01-3.654.073.107.107 0 00-.15 0l-1.4 1.4a.113.113 0 00.004.156z"></path></svg></a><a id="effect-dependencies" style="position:absolute;top:-7rem"></a></span></span></h2><p class="md-p md:leading-5 text-gray-80 md:text-16">In some cases, cleaning up or applying the effect after every render might create a performance problem. Let&#x27;s look at a concrete example to see what <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect</code> does:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RES</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-res "><span class="hljs-comment">// from a previous example above</span>
<span class="hljs-module-identifier">React</span>.useEffect1(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-keyword">open</span> <span class="hljs-module-identifier">Document</span>
  document<span class="hljs-operator">-&gt;</span>setTitle(<span class="hljs-string">`You clicked ${Belt.Int.toString(count)} times!`</span>)
  <span class="hljs-constructor">None</span>;
<span class="hljs-literal">}</span>, [count]);
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16">Here, we pass <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">[count]</code> to <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">useEffect1</code> as a dependency. What does this mean? If the <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">count</code> is 5, and then our component re-renders with count still equal to 5, React will compare <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">[5]</code> from the previous render and <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">[5]</code> from the next render. Because all items within the array are the same (5 === 5), React would skip the effect. That’s our optimization.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">When we render with count updated to 6, React will compare the items in the <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">[5]</code> array from the previous render to items in the <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">[6]</code> array from the next render. This time, React will re-apply the effect because <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">5 !== 6</code>. If there are multiple items in the array, React will re-run the effect even if just one of them is different.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">This also works for effects that have a cleanup phase:</p><pre class="mt-2 mb-4 -mx-6 xs:mx-0 block"><div class="md-code font-mono w-full block mt-5 mb-5"><div class="relative w-full flex-col rounded-none xs:rounded-lg border-t border-b xs:border border-gray-10 bg-gray-5 py-2 text-gray-80"><div class="absolute right-0 px-4 pb-4 bg-gray-5 font-sans text-12 font-bold text-gray-60 ">RES</div><div class="px-5 text-14 pt-4 pb-2 overflow-x-auto -mt-2"><code class="hljs lang-res "><span class="hljs-comment">// from a previous example above</span>
<span class="hljs-module-identifier">React</span>.useEffect1(() <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
  <span class="hljs-keyword">let</span> handleStatusChange <span class="hljs-operator">=</span> (status) <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    setState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
      status.<span class="hljs-module-identifier">ChatAPI</span>.isOnline ? <span class="hljs-constructor">Online</span> : <span class="hljs-constructor">Offline</span>
    <span class="hljs-literal">}</span>)
  <span class="hljs-literal">}</span>

  <span class="hljs-module-identifier">ChatAPI</span>.subscribeToFriendStatus(friendId, handleStatusChange);
  setState(_ <span class="hljs-function">=&gt;</span> <span class="hljs-constructor">Loading</span>);

  <span class="hljs-keyword">let</span> cleanup <span class="hljs-operator">=</span> () <span class="hljs-function">=&gt;</span> <span class="hljs-literal">{</span>
    <span class="hljs-module-identifier">ChatAPI</span>.unsubscribeFromFriendStatus(friendId, handleStatusChange)
  <span class="hljs-literal">}</span>

  <span class="hljs-constructor">Some</span>(cleanup)
<span class="hljs-literal">}</span>, [friendId]) <span class="hljs-comment">// Only re-subscribe if friendId changes</span>
</code></div></div></div></pre><p class="md-p md:leading-5 text-gray-80 md:text-16"><strong class="font-semibold text-gray-90">Important:</strong> If you use this optimization, make sure the array includes all values from the component scope (such as props and state) that change over time and that are used by the effect. Otherwise, your code will reference stale values from previous renders</p><p class="md-p md:leading-5 text-gray-80 md:text-16">If you want to run an effect and clean it up only once (on mount and unmount), use <code class="md-inline-code py-0.75 px-2 text-smaller-1 font-medium rounded font-mono bg-gray-10-tr">React.useEffect0</code>.</p><p class="md-p md:leading-5 text-gray-80 md:text-16">If you are interested in more performance optmization related topics, have a look at the ReactJS <a class="no-underline text-fire hover:underline" href="https://reactjs.org/docs/hooks-faq.html#performance-optimizations" rel="noopener noreferrer">Performance Optimization Docs</a> for more detailed infos.</p></div></main></div></div></div><footer class="flex justify-center border-t border-gray-10"><div class="flex flex-col md:flex-row justify-between max-w-1280 w-full px-8 py-16 text-gray-95 "><div><img class="w-40 mb-5" src="/static/rescript_logo_black.svg"/><div class="text-16"><p>© 2020 The ReScript Project</p><p>Software distribution powered by <a class="no-underline text-fire hover:underline" href="https://www.keycdn.com/" rel="noopener noreferrer" target="_blank">KeyCDN</a>.</p></div></div><div class="flex flex-col space-y-16 md:flex-row mt-16 md:mt-0 md:ml-16 md:space-y-0 md:space-x-16"><div><span class="block text-gray-60 tracking-wide text-14 uppercase mb-4">About</span><ul class="text-16 text-gray-80-tr space-y-2"><li><a class="hover:underline hover:pointer" href="/community#core-team">Team</a></li><li><a class="hover:underline hover:pointer" href="https://rescript-association.org" target="_blank">ReScript Association</a></li></ul></div><div><span class="block text-gray-60 tracking-wide text-14 uppercase mb-4">Find us on</span><div class="flex space-x-3 text-gray-100"><a class="hover:pointer hover:text-gray-60-tr" href="https://github.com/rescript-lang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" height="17.79" width="18.236" viewBox="0 0 18.236 17.79"><g transform="translate(8 -5.365)"><path d="M17.013,9.906a9.078,9.078,0,0,0-3.318-3.318A8.918,8.918,0,0,0,9.118,5.365,8.919,8.919,0,0,0,4.541,6.588,9.077,9.077,0,0,0,1.223,9.906,8.919,8.919,0,0,0,0,14.483a8.861,8.861,0,0,0,1.739,5.36,8.93,8.93,0,0,0,4.493,3.294.531.531,0,0,0,.475-.083.464.464,0,0,0,.154-.356q0-.036-.006-.641T6.85,21l-.273.047a3.484,3.484,0,0,1-.659.042,5.02,5.02,0,0,1-.825-.083,1.844,1.844,0,0,1-.8-.356,1.506,1.506,0,0,1-.522-.73l-.119-.273a2.966,2.966,0,0,0-.374-.605,1.432,1.432,0,0,0-.516-.451l-.083-.06a.871.871,0,0,1-.154-.143.651.651,0,0,1-.107-.166q-.036-.083.059-.137a.77.77,0,0,1,.344-.053l.237.035a1.733,1.733,0,0,1,.588.285,1.916,1.916,0,0,1,.576.617,2.093,2.093,0,0,0,.659.742,1.4,1.4,0,0,0,.778.255,3.376,3.376,0,0,0,.677-.059,2.362,2.362,0,0,0,.534-.178,1.924,1.924,0,0,1,.582-1.223,8.129,8.129,0,0,1-1.217-.214,4.845,4.845,0,0,1-1.116-.463,3.2,3.2,0,0,1-.956-.8,3.822,3.822,0,0,1-.623-1.247A5.928,5.928,0,0,1,3.3,14.007a3.463,3.463,0,0,1,.938-2.446A3.192,3.192,0,0,1,4.321,9.14a1.664,1.664,0,0,1,1.021.16,7.138,7.138,0,0,1,.991.457q.315.19.5.321a8.574,8.574,0,0,1,4.559,0l.451-.285a6.389,6.389,0,0,1,1.092-.522,1.556,1.556,0,0,1,.962-.13A3.161,3.161,0,0,1,14,11.562a3.463,3.463,0,0,1,.938,2.446,5.994,5.994,0,0,1-.243,1.787,3.674,3.674,0,0,1-.629,1.247,3.319,3.319,0,0,1-.962.789,4.855,4.855,0,0,1-1.116.463,8.121,8.121,0,0,1-1.217.214,2.115,2.115,0,0,1,.617,1.686v2.5a.473.473,0,0,0,.149.356.516.516,0,0,0,.469.083A8.929,8.929,0,0,0,16.5,19.842a8.863,8.863,0,0,0,1.739-5.36A8.926,8.926,0,0,0,17.013,9.906Z" transform="translate(-8 0)"></path></g></svg></a><a class="hover:pointer hover:text-gray-60-tr" href="https://twitter.com/rescriptlang" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" viewBox="0 0 15.53 12.71"><path d="M5.794,12.711a13.325,13.325,0,0,1-2.058-.163A9.659,9.659,0,0,1,.92,11.523L0,11.02l1-.328c1.089-.358,1.751-.58,2.571-.928A3.421,3.421,0,0,1,1.809,7.726l-.232-.7.19.029a3.456,3.456,0,0,1-.433-.534A3.276,3.276,0,0,1,.779,4.57l.044-.614L1.19,4.1a3.437,3.437,0,0,1-.333-.934A3.552,3.552,0,0,1,1.235.774l.32-.588L1.984.7A7.883,7.883,0,0,0,7.091,3.575a3.054,3.054,0,0,1,.185-1.623A3.038,3.038,0,0,1,8.511.536,3.71,3.71,0,0,1,10.664.008a3.439,3.439,0,0,1,2.114.872,7.1,7.1,0,0,0,.774-.258c.17-.064.362-.136.6-.219L15.042.1l-.579,1.652.119-.008L15.53,1.7l-.56.765c-.032.044-.04.056-.052.073-.045.068-.1.153-.87,1.179a1.448,1.448,0,0,0-.271.943,8.916,8.916,0,0,1-.487,3.586,6.346,6.346,0,0,1-1.7,2.524,7.524,7.524,0,0,1-3.566,1.724A10.979,10.979,0,0,1,5.794,12.711Zm0,0" transform="translate(0 -0.001)"></path></svg></a><a class="hover:pointer hover:text-gray-60-tr" href="https://forum.rescript-lang.org" rel="noopener noreferrer" target="_blank"><svg class="fill-current w-6 h-6" viewBox="0 0 24 24"><path d="M12.103 0C18.666 0 24 5.485 24 11.997c0 6.51-5.33 11.99-11.9 11.99L0 24V11.79C0 5.28 5.532 0 12.103 0zm.116 4.563a7.395 7.395 0 00-6.337 3.57 7.247 7.247 0 00-.148 7.22L4.4 19.61l4.794-1.074a7.424 7.424 0 008.136-1.39 7.256 7.256 0 001.737-7.997 7.375 7.375 0 00-6.84-4.585h-.008z"></path></svg></a></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/docs/react/latest/hooks-effect","query":{},"buildId":"S5HYsHOQBCfuIMfZ4LslI","runtimeConfig":{},"nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-14689e3e48c095b2d3e7.js"></script><script src="/_next/static/chunks/webpack-4e582efe68f401073f15.js" async=""></script><script src="/_next/static/chunks/framework-998f5b95ac98f74bab8f.js" async=""></script><script src="/_next/static/chunks/43481-280514135c7b3adb9781.js" async=""></script><script src="/_next/static/chunks/62168-646866730a0afa3b7493.js" async=""></script><script src="/_next/static/chunks/main-7e2e753fca1f45eed2e0.js" async=""></script><script src="/_next/static/chunks/53706-d09a138e6cd709547d22.js" async=""></script><script src="/_next/static/chunks/25396-7c202dfca7dd4a484721.js" async=""></script><script src="/_next/static/chunks/49909-39e42e72225fd86b3fa0.js" async=""></script><script src="/_next/static/chunks/8792-02da446de816dae9d9f0.js" async=""></script><script src="/_next/static/chunks/13692-5739462c0ba24bf7f2e2.js" async=""></script><script src="/_next/static/chunks/pages/_app-85ce0337ab254104dc2d.js" async=""></script><script src="/_next/static/chunks/pages/docs/react/latest/hooks-effect-38f94b498861c70ef8ac.js" async=""></script><script src="/_next/static/S5HYsHOQBCfuIMfZ4LslI/_buildManifest.js" async=""></script><script src="/_next/static/S5HYsHOQBCfuIMfZ4LslI/_ssgManifest.js" async=""></script><script async="" defer="" src="https://scripts.simpleanalyticscdn.com/latest.js"></script><noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt=""/></noscript></body></html>