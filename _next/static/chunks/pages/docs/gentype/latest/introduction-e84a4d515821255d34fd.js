(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3891],{22122:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},17375:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:function(){return r}})},3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return y}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"===typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=l(n),y=o,f=m["".concat(c,".").concat(y)]||m[y]||u[y]||a;return n?r.createElement(f,i(i({ref:t},s),{},{components:n})):r.createElement(f,i({ref:t},s))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"===typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"===typeof e?e:o,i[1]=p;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},96086:function(e){"use strict";var t=Object.assign.bind(Object);e.exports=t,e.exports.default=e.exports},78385:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(22122),o=n(17375),a=n(67294),i=n(3905),p=(a.createElement,{});function c(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"gentype"},"GenType"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"genType")," is a code generation tool that lets you export ReScript values and types to use in JavaScript, and import JavaScript values and types into ReScript."),(0,i.kt)("p",null,"Converter functions between the two representations are generated based on the type of the value. The converters can be generated in vanilla JavaScript, or in ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://www.typescriptlang.org/"}),"TypeScript")," / ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://flow.org/en/"}),"Flow")," for a type-safe idiomatic interface.\nIn particular, conversion of ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"/docs/react/latest/introduction"}),"rescript-react")," components both ways is supported, with automatic generation of the wrappers."),(0,i.kt)("p",null,"Here's an article describing how to use ",(0,i.kt)("inlineCode",{parentName:"p"},"genType")," as part of a migration strategy where a tree of components is gradually converted to ReScript bottom-up (old article containing Reason / BuckleScript): ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://medium.com/p/c514265b466d"}),"Adopting Reason: strategies, dual sources of truth, and why genType is a big deal"),"."),(0,i.kt)("p",null,"The implementation of genType performs a type-directed transformation of ReScript programs after ReScript source code compilation. The transformed programs operate on data types idiomatic to JS."),(0,i.kt)("p",null,"For example, a ReScript function operating on a ReScript variant ",(0,i.kt)("inlineCode",{parentName:"p"},"type t  = | A(int) | B(string)")," (which is represented as custom blocks at runtime) is exported to a JS function operating on the corresponding JS object of type ",(0,i.kt)("inlineCode",{parentName:"p"},'{ tag: "A"; value: number }\n  | { tag: "B"; value: string }'),"."),(0,i.kt)("p",null,"The output of genType can be configured by using one of 3 back-ends: ",(0,i.kt)("inlineCode",{parentName:"p"},"untyped")," to generate wrappers in vanilla JS, ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript")," to generate ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://www.typescriptlang.org/"}),"TypeScript"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"flow")," to generate JS with ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://flow.org/en/"}),"Flow")," type annotations."),(0,i.kt)("h2",{id:"a-quick-example"},"A Quick Example"),(0,i.kt)("p",null,"Let's assume we are working on a TypeScript (TS) codebase and we want to integrate a single rescript-react component."),(0,i.kt)("p",null,"We want to be able to import the rescript-react component like any other React component in our existing TS code, but we also want to preserve all the ReScript types in the TS type system (and convert incompatible values if necessary)."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"That's exactly what genType was made for!")),(0,i.kt)("p",null,"First we'll set up a rescript-react component:"),(0,i.kt)("pre",null,(0,i.kt)("code",(0,r.Z)({parentName:"pre"},{className:"language-res"}),'/* src/MyComp.res */\n\n@genType\ntype color =\n  | Red\n  | Blue;\n\n@genType\n@react.component\nlet make = (~name: string, ~color: color) => {\n  let colorStr =\n    switch (color) {\n    | Red => "red"\n    | Blue => "blue"\n    };\n\n  <div className={"color-" ++ colorStr}> {React.string(name)} </div>;\n};\n')),(0,i.kt)("p",null,"On a successful compile, ",(0,i.kt)("inlineCode",{parentName:"p"},"genType")," will convert ",(0,i.kt)("inlineCode",{parentName:"p"},"src/MyComp.res")," to a TS file called ",(0,i.kt)("inlineCode",{parentName:"p"},"src/MyComp.gen.ts")," which will look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",(0,r.Z)({parentName:"pre"},{className:"language-ts"}),'// src/MyComp.gen.tsx\n\n/* TypeScript file generated from MyComp.res by genType. */\n/* eslint-disable import/first */\n\n\nimport * as React from \'react\';\n\nconst $$toRE818596289: { [key: string]: any } = {"Red": 0, "Blue": 1};\n\n// tslint:disable-next-line:no-var-requires\nconst MyCompBS = require(\'./MyComp.bs\');\n\n// tslint:disable-next-line:interface-over-type-literal\nexport type color = "Red" | "Blue";\n\n// tslint:disable-next-line:interface-over-type-literal\nexport type Props = { readonly color: color; readonly name: string };\n\nexport const make: React.ComponentType<{ readonly color: color; readonly name: string }> = function MyComp(Arg1: any) {\n  const $props = {color:$$toRE818596289[Arg1.color], name:Arg1.name};\n  const result = React.createElement(MyCompBS.make, $props);\n  return result\n};\n')),(0,i.kt)("p",null,"genType automatically maps the ",(0,i.kt)("inlineCode",{parentName:"p"},"color")," variant to TS via a string union type ",(0,i.kt)("inlineCode",{parentName:"p"},'color = "Red" | "Blue"'),", and also provides all the converters to convert between the ReScript & TS representation as well."),(0,i.kt)("p",null,"Therefore way we can seamlessly use ReScript specific data structures within TS without writing the converter code by hand!"),(0,i.kt)("p",null,"Within our TypeScript application, we can now import and use the React component in the following manner:"),(0,i.kt)("pre",null,(0,i.kt)("code",(0,r.Z)({parentName:"pre"},{className:"language-ts"}),'// src/App.ts\nimport { make as MyComp } from "./MyComp.gen.tsx";\n\nconst App = () => {\n  return (<div>\n    <h1> My Component </h1>\n    <MyComp color="Blue" name="ReScript & TypeScript" />\n  </div>);\n};\n')),(0,i.kt)("p",null,"That's it for our quick example."),(0,i.kt)("p",null,"For detailed information, head to the ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"getting-started"}),"Getting Started")," or ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"usage"}),"Usage")," section."),(0,i.kt)("h2",{id:"development"},"Development"),(0,i.kt)("p",null,"For contributions, issues or questions, please refer to the ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://github.com/reason-association/genType"}),"Github repository")," or our ",(0,i.kt)("a",(0,r.Z)({parentName:"p"},{href:"https://forum.rescript-lang.org"}),"ReScript forum"),"."))}c.isMDXComponent=!0,c.frontmatter={title:"Introduction",description:"GenType - Interoperability between ReScript and TypeScript / Flow",canonical:"/docs/gentype/latest/introduction",__ghEditHref:"https://github.com/reason-association/rescript-lang.org/blob/master/pages/docs/gentype/latest/introduction.mdx"}},83809:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/gentype/latest/introduction",function(){return n(78385)}])}},function(e){e.O(0,[49774],(function(){return t=83809,e(e.s=t);var t}));var t=e.O();_N_E=t}]);